let wiringXPoints = {
    x0: [-0.16570967872053635, 0.3089304380604097, 0.13941611063864198, 0.24112470709171166, 0.27502757257606475, 0.3428333035447583, 0.3767361690291155, 0.41063903451346817, -0.13180681323618473, -0.09790394775183274, -0.06400108226747572, -0.030098216783124535, 0.003804648701228281, 0.03770751418558245, 0.07161037966993568, 0.10551324515428821, 0.225196858569643, 0.19014501872648074, 0.25859061621625495, 0.29150816982851513, 0.32597435713789336, 0.3592016374895765, 0.39366782479895324, 0.42689510515063533, -0.04702952433998594, -0.01333137458782741, 0.021297699251674566, 0.05468554097471924, 0.08844965874439717, 0.12283439257230254, 0.15628820231286744, 0.1910759428138234],
    x1: [-0.4355300576295487, -0.4054552594253796, -0.37538046122120705, -0.34530566301703786, 0.43663909029135745, -0.3152308648128713, -0.2851560666086997, -0.2550812684045329, -0.22500647020036454, -0.19493167199619196, -0.16485687379202554, -0.13478207558785624, -0.10470727738368726, -0.07463247917951807, -0.04455768097534887, -0.014482882771179914, 0.015591915432989163, 0.0456667136371586, 0.07574151184132756, 0.105816310045497, 0.13589110824966838, 0.16596590645383505, 0.1960407046580041, 0.2261155028621737, 0.256190301066343, 0.28626509927051186, 0.31633989747468116, 0.34641469567885025, 0.37648949388301933, 0.40656429208718836, -0.4355300576295454, -0.4054552594253796, -0.3753804612212103, -0.34530566301703786, -0.3152308648128713, -0.2851560666086997, -0.2550812684045329, -0.2250064702003613, -0.19493167199619196, -0.16485687379202554, -0.13478207558785696, -0.10470727738368726, -0.07463247917951542, -0.04455768097534887, -0.014482882771179914, 0.015591915432989163, 0.0456667136371586, 0.07574151184132684, 0.105816310045497, 0.13589110824966583, 0.16596590645383505, 0.1960407046580041, 0.2261155028621737, 0.256190301066343, 0.28626509927051186, 0.31633989747468116, 0.34641469567885025, 0.37648949388301933, 0.40656429208718836, 0.43663909029135745, -0.4355300576295454, -0.43553005762954755, -0.4355300576295454, -0.43553005762954344, -0.43553005762954344, -0.4054552594253796, -0.4054552594253762, -0.4054552594253739, -0.4054552594253743, -0.4054552594253762, -0.3753804612212103, -0.37538046122120705, -0.3753804612212092, -0.3753804612212051, -0.3753804612212051, -0.34530566301703786, -0.3453056630170401, -0.34530566301703786, -0.345305663017036, -0.345305663017036, -0.3152308648128719, -0.31523086481286877, -0.3152308648128719, -0.31523086481286877, -0.31523086481286683, -0.2851560666086997, -0.28515606660870163, -0.28515606660870163, -0.2851560666086973, -0.2851560666086997, -0.2550812684045304, -0.2550812684045336, -0.2550812684045304, -0.2550812684045336, -0.2550812684045304, -0.2250064702003613, -0.22500647020035924, -0.2250064702003613, -0.22500647020036346, -0.22500647020036346, -0.19493167199619196, -0.19493167199619196, -0.19493167199619196, -0.19493167199619196, -0.19493167199619196, -0.13478207558785696, -0.16485687379202615, -0.16485687379202615, -0.16485687379202302, -0.16485687379202615, -0.16485687379202615, -0.13478207558785382, -0.13478207558785696, -0.13478207558785588, -0.13478207558785382, -0.10470727738368474, -0.10470727738368787, -0.10470727738368474, -0.10470727738368679, -0.10470727738368474, -0.07463247917951879, -0.07463247917951879, -0.07463247917951879, -0.07463247917951879, -0.07463247917951542, -0.044557680975349595, -0.044557680975349595, -0.04455768097534634, -0.04455768097534634, -0.04455768097534634, -0.014482882771180396, -0.014482882771180396, -0.014482882771177263, -0.014482882771177263, -0.014482882771180396, 0.01559191543298844, 0.015591915432991935, 0.01559191543298844, 0.015591915432991935, 0.01559191543298844, 0.045666713637161016, 0.04566671363715776, 0.04566671363715776, 0.045666713637162945, 0.04566671363715776, 0.07574151184133021, 0.07574151184132684, 0.07574151184133021, 0.07574151184132684, 0.07574151184132805, 0.10581631004549616, 0.10581631004549616, 0.1058163100454994, 0.1058163100454994, 0.10581631004549616, 0.13589110824966838, 0.13589110824966535, 0.13589110824966535, 0.13589110824966535, 0.13589110824966838, 0.16596590645383433, 0.16596590645383433, 0.16596590645383769, 0.16596590645383433, 0.16596590645383433, 0.19604070465800666, 0.19604070465800666, 0.19604070465800363, 0.22611550286217222, 0.19604070465800666, 0.22611550286217222, 0.22611550286217222, 0.2261155028621756, 0.19604070465800666, 0.22611550286217222, 0.25619030106634155, 0.25619030106634155, 0.25619030106634155, 0.25619030106634155, 0.25619030106634494, 0.2862650992705104, 0.2862650992705104, 0.2862650992705104, 0.28626509927051375, 0.28626509927051375, 0.3163398974746797, 0.3163398974746797, 0.3163398974746831, 0.3163398974746831, 0.3163398974746831, 0.34641469567885214, 0.3464146956788485, 0.3464146956788485, 0.3464146956788485, 0.34641469567885214, 0.3764894938830179, 0.3764894938830179, 0.3764894938830179, 0.3764894938830212, 0.3764894938830212, 0.4065642920871869, 0.4065642920871869, 0.4065642920871869, 0.4366390902913596, 0.4065642920871903, 0.4366390902913563, 0.4366390902913563, 0.4366390902913563, 0.4065642920871869, 0.4366390902913563, -0.43553005762954344, -0.43553005762954344, -0.4355300576295487, -0.43553005762954344, -0.43553005762954344, -0.40545525942537836, -0.4054552594253743, -0.4054552594253743, -0.4054552594253743, -0.4054552594253796, -0.3753804612212092, -0.3753804612212051, -0.3753804612212051, -0.3753804612212051, -0.3753804612212092, -0.345305663017036, -0.345305663017036, -0.3453056630170401, -0.345305663017036, -0.345305663017036, -0.31523086481286683, -0.3152308648128708, -0.31523086481286683, -0.31523086481286683, -0.31523086481286683, -0.28515606660869774, -0.28515606660869774, -0.28515606660870163, -0.28515606660869774, -0.28515606660869774, -0.25508126840453255, -0.25508126840452866, -0.25508126840452866, -0.25508126840453255, -0.25508126840452866, -0.22500647020035924, -0.225006470200359, -0.22500647020035924, -0.22500647020035924, -0.22500647020036346, -0.1949316719961903, -0.1949316719961903, -0.1949316719961903, -0.1949316719961903, -0.1949316719961903, -0.1648568737920206, -0.16485687379202302, -0.16485687379202096, -0.16485687379202096, -0.16485687379202507, -0.13478207558785202, -0.13478207558785382, -0.13478207558785202, -0.13478207558785202, -0.13478207558785202, -0.10470727738368281, -0.10470727738368281, -0.10470727738368281, -0.10470727738368679, -0.10470727738368281, -0.07463247917951542, -0.07463247917951374, -0.07463247917951374, -0.07463247917951374, -0.07463247917951325, -0.04455768097534634, -0.04455768097534634, -0.04455768097534405, -0.04455768097534441, -0.04455768097534441, -0.014482882771177263, -0.014482882771174852, -0.014482882771175334, -0.014482882771175334, -0.014482882771174852, 0.015591915432993745, 0.015591915432991935, 0.015591915432991935, 0.015591915432993745, 0.015591915432989526, 0.045666713637162945, 0.045666713637161016, 0.045666713637162945, 0.045666713637162945, 0.045666713637163306, 0.07574151184133202, 0.07574151184133021, 0.07574151184133021, 0.07574151184133021, 0.07574151184133202, 0.1058163100454994, 0.1058163100454994, 0.10581631004550159, 0.10581631004550122, 0.10581631004550122, 0.1358911082496703, 0.13589110824966838, 0.13589110824966644, 0.1358911082496708, 0.13589110824966838, 0.16596590645383769, 0.16596590645383938, 0.16596590645383769, 0.16596590645383769, 0.16596590645383938, 0.19604070465800905, 0.19604070465800869, 0.19604070465800869, 0.19604070465800905, 0.19604070465800666, 0.2261155028621756, 0.2261155028621756, 0.22611550286217755, 0.22611550286217755, 0.22611550286217755, 0.25619030106634494, 0.2561903010663473, 0.2561903010663469, 0.25619030106634494, 0.2561903010663469, 0.28626509927051375, 0.2862650992705164, 0.28626509927051375, 0.28626509927051375, 0.28626509927051375, 0.3163398974746831, 0.3163398974746831, 0.316339897474685, 0.3163398974746855, 0.3163398974746831, 0.34641469567885214, 0.34641469567885214, 0.3464146956788546, 0.3464146956788546, 0.3464146956788541, 0.37648949388302316, 0.3764894938830212, 0.3764894938830212, 0.3764894938830239, 0.3764894938830239, 0.4065642920871903, 0.4065642920871903, 0.4065642920871903, 0.40656429208719225, 0.40656429208719297, 0.4366390902913596, 0.4366390902913596, 0.43663909029136183, 0.43663909029136183, 0.43663909029136183, -0.43553005762954344, -0.43553005762954344, -0.4054552594253743, -0.4054552594253743, -0.345305663017036, -0.3753804612212051, -0.3753804612212051, -0.345305663017036, -0.31523086481286683, -0.31523086481286683, -0.28515606660869774, -0.28515606660869774, -0.25508126840452866, -0.25508126840452866, -0.22500647020035924, -0.22500647020035924, -0.1949316719961903, -0.1949316719961903, -0.16485687379202096, -0.13478207558785202, -0.13478207558785202, -0.16485687379202096, -0.10470727738368281, -0.10470727738368281, -0.07463247917951374, -0.07463247917951374, -0.04455768097534441, -0.04455768097534441, -0.014482882771175334, -0.014482882771175334, 0.015591915432993745, 0.015591915432993745, 0.045666713637162945, 0.045666713637162945, 0.07574151184133202, 0.07574151184133202, 0.10581631004550122, 0.10581631004550122, 0.1358911082496703, 0.1358911082496703, 0.16596590645383985, 0.16596590645383938, 0.19604070465800905, 0.19604070465800869, 0.22611550286217802, 0.22611550286217755, 0.2561903010663473, 0.2561903010663469, 0.2862650992705164, 0.2862650992705164, 0.3163398974746855, 0.3464146956788546, 0.3464146956788541, 0.3163398974746855, 0.3764894938830239, 0.3764894938830239, 0.40656429208719297, 0.40656429208719297, 0.43663909029136205, 0.43663909029136205],
    x2: [-0.00001985584269739049, -0.00001985584269739049],
    x3: [-0.25713074101659733, 0.2642279382128468],
    x4: [-0.4201426911836688, 0.4135345704661387],
    x5: [-0.02462889408867556, -0.02462889408867556],
    x6: [0.49552323581957114, 0.49552323581957114],
    x7: [-0.006054565323046129, -0.006054565323046129],
    x8: [-0.33484580542016396, 0.33651173164350273],
    x9: [-0.10879654267293674, 0.04112476371797642],

};

let wiringYPoints = {
    y0: [-0.4445729874223717, 0.43182761693507016, -0.4445729874223537, 0.4318276169350643, 0.4318276169350643, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, -0.444572987422368, -0.444572987422368, -0.4445729874223717, -0.444572987422368, -0.444572987422368, -0.444572987422368, -0.444572987422368, -0.444572987422368, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, -0.44502297685843273, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016, 0.43182761693507016],
    y1: [-0.43585246460459726, -0.43585246460459726, -0.4358524646045939, -0.4358524646045939, -0.4358524646045926, -0.4358524646045926, -0.4358524646045939, -0.4358524646045926, -0.43585246460459726, -0.4358524646045939, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045939, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.4358524646045926, -0.3900958073368223, -0.39009580733682575, -0.39009580733682575, -0.3900958073368223, -0.39009580733682103, -0.3900958073368223, -0.39009580733682103, -0.3900958073368223, -0.3900958073368223, -0.39009580733682103, -0.39009580733682575, -0.39009580733682103, -0.3900958073368223, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682575, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.39009580733682103, -0.2528258355335071, -0.20706917826573656, -0.16131252099796384, -0.11555586373019824, -0.06979920646242654, -0.2528258355335106, -0.20706917826573554, -0.16131252099797017, -0.11555586373019824, -0.06979920646242035, -0.2528258355335106, -0.20706917826573554, -0.16131252099796495, -0.11555586373019824, -0.06979920646242654, -0.2528258355335071, -0.20706917826573656, -0.16131252099796384, -0.11555586373019824, -0.06979920646242654, -0.2528258355335106, -0.20706917826573554, -0.16131252099796728, -0.1155558637301922, -0.06979920646242654, -0.2528258355335071, -0.20706917826573656, -0.16131252099796495, -0.11555586373019852, -0.06979920646242035, -0.2528258355335071, -0.20706917826573892, -0.16131252099796384, -0.11555586373019568, -0.06979920646242035, -0.2528258355335071, -0.20706917826574156, -0.16131252099796384, -0.06979920646242145, -0.11555586373019329, -0.2528258355335071, -0.20706917826573554, -0.16131252099796384, -0.1155558637301922, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.1155558637301922, -0.06979920646242374, -0.2528258355335106, -0.20706917826573554, -0.16131252099796728, -0.11555586373019329, -0.06979920646242035, -0.2528258355335071, -0.20706917826573892, -0.16131252099796384, -0.11555586373019329, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.11555586373019568, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.1155558637301922, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.1155558637301922, -0.06979920646242374, -0.2528258355335106, -0.20706917826573554, -0.16131252099796728, -0.1155558637301922, -0.06979920646242374, -0.2528258355335071, -0.20706917826573892, -0.16131252099796728, -0.11555586373019824, -0.06979920646242374, -0.2528258355335071, -0.20706917826573892, -0.16131252099796384, -0.11555586373019568, -0.06979920646242145, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.1155558637301922, -0.06979920646242374, -0.2528258355335071, -0.20706917826573892, -0.16131252099796728, -0.11555586373019568, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.11555586373019568, -0.06979920646242374, -0.2528258355335071, -0.20706917826573554, -0.16131252099796728, -0.11555586373019568, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.1155558637301922, -0.06979920646242374, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.11555586373019568, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.1155558637301922, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796384, -0.1155558637301922, -0.06979920646242035, -0.2528258355335071, -0.20706917826573892, -0.16131252099796728, -0.11555586373019568, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.1155558637301922, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.1155558637301922, -0.06979920646242035, -0.2528258355335106, -0.20706917826573892, -0.16131252099796728, -0.11555586373019568, -0.06979920646242374, 0.06747076534088856, 0.11322742260866002, 0.15898407987643506, 0.20474073714420343, 0.25049739441197505, 0.06747076534089341, 0.11322742260866002, 0.15898407987643196, 0.20474073714420343, 0.25049739441197827, 0.06747076534089341, 0.11322742260866002, 0.15898407987643196, 0.20474073714420343, 0.2504973944119801, 0.06747076534088856, 0.11322742260866002, 0.1589840798764368, 0.20474073714420343, 0.25049739441197505, 0.06747076534088856, 0.11322742260866507, 0.15898407987643196, 0.20474073714420343, 0.25049739441197505, 0.06747076534088856, 0.11322742260866002, 0.1589840798764368, 0.20474073714420343, 0.25049739441197505, 0.06747076534089341, 0.11322742260866002, 0.15898407987643196, 0.20474073714420857, 0.25049739441197505, 0.06747076534088856, 0.11322742260865974, 0.15898407987643196, 0.20474073714420343, 0.2504973944119801, 0.06747076534088856, 0.11322742260866002, 0.15898407987643196, 0.20474073714420343, 0.25049739441197505, 0.06747076534088818, 0.11322742260866626, 0.15898407987643196, 0.20474073714420343, 0.2504973944119801, 0.06747076534088856, 0.11322742260866626, 0.15898407987643196, 0.25049739441197505, 0.20474073714420343, 0.06747076534088856, 0.11322742260866002, 0.15898407987643196, 0.20474073714420857, 0.25049739441197505, 0.0674707653408946, 0.11322742260866002, 0.15898407987643196, 0.20474073714420343, 0.25049739441197477, 0.0674707653408946, 0.11322742260866626, 0.15898407987643148, 0.20474073714420343, 0.25049739441197505, 0.0674707653408946, 0.11322742260865974, 0.15898407987643196, 0.20474073714420343, 0.25049739441197477, 0.06747076534088856, 0.11322742260866626, 0.15898407987643792, 0.20474073714420343, 0.2504973944119801, 0.06747076534088856, 0.11322742260866626, 0.15898407987643196, 0.20474073714420343, 0.25049739441197477, 0.06747076534088856, 0.11322742260866626, 0.15898407987643792, 0.20474073714420957, 0.25049739441197505, 0.0674707653408946, 0.11322742260866626, 0.15898407987643148, 0.20474073714420343, 0.25049739441197505, 0.06747076534088856, 0.11322742260866626, 0.1589840798764368, 0.20474073714420304, 0.2504973944119812, 0.0674707653408946, 0.11322742260866002, 0.15898407987643792, 0.20474073714420957, 0.25049739441197505, 0.06747076534088818, 0.11322742260866002, 0.15898407987643196, 0.20474073714420304, 0.2504973944119812, 0.0674707653408946, 0.11322742260866626, 0.15898407987643196, 0.20474073714420343, 0.25049739441197505, 0.0674707653408946, 0.11322742260865974, 0.15898407987643196, 0.20474073714420957, 0.25049739441197505, 0.0674707653408946, 0.11322742260865974, 0.15898407987643792, 0.20474073714420957, 0.2504973944119812, 0.0674707653408946, 0.11322742260866626, 0.20474073714420343, 0.15898407987643148, 0.2504973944119812, 0.0674707653408946, 0.11322742260866626, 0.15898407987643148, 0.20474073714420304, 0.25049739441197505, 0.06747076534088856, 0.11322742260866626, 0.15898407987643792, 0.20474073714420304, 0.25049739441197477, 0.0674707653408946, 0.11322742260866626, 0.15898407987643792, 0.20474073714420343, 0.25049739441197477, 0.0674707653408946, 0.11322742260866626, 0.15898407987643196, 0.20474073714420343, 0.25049739441197505, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.3877673662152903, 0.4335240234830617, 0.38776736621528995, 0.4335240234830617, 0.38776736621528995, 0.4335240234830617, 0.38776736621528995, 0.4335240234830617, 0.38776736621528995, 0.4335240234830617, 0.38776736621528995, 0.4335240234830615, 0.38776736621528995, 0.4335240234830615, 0.3877673662152903, 0.4335240234830615, 0.38776736621528995, 0.4335240234830615, 0.38776736621528995, 0.4335240234830615, 0.38776736621528995, 0.4335240234830615],
    y2: [-0.44933822152103914, 0.4140512583532616],
    y3: [0.2926591734669553, 0.5127606278424598],
    y4: [0.49975342361586833, 0.49975342361586833],
    y5: [-0.5008893804902528, 0.4981170475513312],
    y6: [-0.07616666559703317, 0.07372120753169188],
    y7: [-0.5012625505784923, 0.5035819806018437],
    y8: [0.25018101283374106, 0.49644316616713885],
    y9: [-0.3671230196989501, -0.3671230196989505],

};

let objectsData = [
    "Arduino UNO", "Microcontrollers", 1.0314452510656404, 32, 1418.4,
    "Breadboard", "Electrical", 0.5462680411038602, 420, 827.4,
    "Resistor", "Electrical", 0.6286216172399489, 2, 1418.4,
    "LED", "Modules", 0.4418678955967626, 2, 1418.4,
    "Button", "Electrical", 0.44765667243030977, 2, 1418.4,
    "Diode", "Electrical", 0.5630794172983389, 2, 1418.4,
    "Battery", "Other", 0.8291107459089542, 2, 1418.4,
    "On/Off Switch", "Electrical", 0.5219815919731521, 2, 1418.4,
    "Capacitor", "Electrical", 0.6959117149009196, 2, 1414.46,
    "Servo Motor", "Modules", 1.8310259597511946, 2, 1414.46,

    //"4pin LED","Modules",0.9326324346993778,4,
];

//"Default Label", Default Font Size, Font Size Length, Lock Rotate, Shift X0, Shift Y0, Shift X1, Shift Y1, Shift X2, Shift Y2, ShiftX3, ShiftY3 (12)
var defaultLabel = [
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "1N4148", 0.03, 5, false, 0.04, 0, 0, 0.04, -0.04, 0, 0, -0.04,
    "AA", 0.08, 7, true, -0.065, 0, 0, -0.065, 0.065, 0, 0, 0.065,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
    "1uF", 0.04, 4, false, 0.06, 0, 0, 0.09, -0.06, 0, 0, -0.09,
    "", -1, 0, true, 0, 0, 0, 0, 0, 0, 0, 0,
];
var nodesDataImport = [];
var nodesImport = [];
var objectsImport = [];

var itemTypes = ["All", "Microcontrollers", "Electrical", "Modules", "Other"];
var objectID = 0;
var itemObjectID = [];
var currentItemType = 0;
var currentPage = 0;

var snapStartX = -10010;
var snapStartY = -10006;
var grid;
var scaleCount = 1;

var activeWire = false;
var activeWireXY = [];

var down = false;
var up = true;
var del = -1;

var nodeLinks = [];
var wireColor = 0xED4040;
var wireGroup = 0;
var lineWidth;
var wireClick = 0;
var clickTime = 0;

var rotateAngle = [];
var settings = [];
var shiftObjects = [];
var startingX = [];
var startingY = [];
var endingX = [];
var endingY = [];
var lastX = 0;
var lastY = 0;

var panelType = 0;
var paletteColors = [0xED4040, 0xED9B40, 0xEDDD2D, 0x4FBA52, 0x45B5C4, 0x406EED, 0x9067B6, 0xE0607E, 0xAE7636, 0x3B3B3B];
var lastClicked = -1;
var lastWire = -1;
var customColors = [];
var objectColors = [0xff0000, 0xffff00, 0x00ff00, 0x0000ff, 0xffffff];
var customObjectColors = [];

class Workspace extends SimpleScene {

    constructor() {
        super("Workspace");
    }

    init() { }

    preload() {
        this.load.image("binhandlearrow", "assets/binhandlearrow.png");
        this.load.image("increasescale", "assets/increasescale.png");
        this.load.image("decreasescale", "assets/decreasescale.png");
        this.load.image("home", "assets/home.png");
        this.load.image("grid", "assets/grid.jpeg");
        this.load.image("magnet", "assets/magnet.png");
        this.load.image("slash", "assets/slash.png");
        this.load.image("arrow", "assets/arrow.png");
        this.load.image("rotate", "assets/rotate.png");
        this.load.image("swap", "assets/swap.png");
        this.load.image("x", "assets/x.png");
        this.load.image("duplicate", "assets/duplicate.png");
        this.load.image("trash", "assets/trash.png");
        this.load.image("edit", "assets/edit.png");
        this.load.image("add", "assets/add.png");
        this.load.image("addnode", "assets/addnode.png");
        this.load.image("forward", "assets/forward.png");
        this.load.image("backward", "assets/backward.png");
        this.load.image("info", "assets/info.png");
        this.load.image("saved", "assets/saved.png");
        this.load.image("editpop", "assets/editpop.png");
        this.load.image("undo", "assets/undo.png");

        objectID = 0;
        for (var i = 0; i < objectsData.length / 5; i++) {
            this.load.image(`${objectID}`, `workspace-objects/${objectID}.png`);
            objectID++;
        }
    }

    create() {
        undo.splice(0, undo.length);
        redo.splice(0, redo.length);
        closing = false;
        opening = false;
        lastPosition = [];
        snapStartX = -10010;
        snapStartY = -10006;
        scaleCount = 1;
        lastX = 0;
        lastY = 0;
        panelType = 0;
        itemBinOpen = true;
        currentItemType = 0;
        currentPage = 0;

        this.clearHTML();

        scaleCount = 1;

        for (var i = 0; i < objectsData.length / 5; i++) {
            for (var v = 0; v < 3; v++) {
                for (var t = 0; t < objectsData[(i * 5) + 3]; t++) {
                    wiringXPoints["x" + i].push(0 - wiringYPoints["y" + i][t + (v * objectsData[(i * 5) + 3])]);
                    wiringYPoints["y" + i].push(wiringXPoints["x" + i][t + (v * objectsData[(i * 5) + 3])]);
                }
            }
        }

        this.title = this.add.text(deviceWidth / 2, deviceHeight * 0.045, "WORKSPACE", 0x999999);
        this.title.setOrigin(0.5, 0);
        this.title.setFontSize(deviceHeight * 0.075);
        this.title.setDepth(1);

        this.instructions = this.add.text(deviceWidth / 2, deviceHeight * 0.15, "Create a wiring diagram here.", 0x000000)
        this.instructions.setOrigin(0.5, 0);
        this.instructions.setFontSize(deviceHeight * 0.03);
        this.instructions.setDepth(1);

        this.binHandle = this.add.circle(deviceWidth * 0.21, deviceHeight / 2, deviceWidth * 0.02, 0xdddddd);
        this.binHandle.enableClick();
        this.binHandle.setDepth(5);

        this.binHandleArrow = this.add.sprite(deviceWidth * 0.215, deviceHeight / 2, "binhandlearrow");
        this.binHandleArrow.setScale(deviceWidth * 0.00002);
        this.binHandleArrow.setAngle(180);
        this.binHandleArrow.enableClick();
        this.binHandleArrow.setDepth(5);

        this.itemBin = this.add.rectangle(deviceWidth * 0.1, deviceHeight * 0.22, deviceWidth * 0.22, deviceHeight * 2, 0xdddddd);
        this.itemBin.setDepth(5);

        this.binLabel = this.add.text(deviceWidth * 0.02, deviceHeight * 0.03, "All", 0x999999);
        this.binLabel.setFontSize(deviceHeight * 0.045);
        this.binLabel.setDepth(5);
        this.binLabelDivider = this.add.line(deviceWidth * 0.015, deviceHeight * 0.09, deviceWidth * 0.2, deviceHeight * 0.09, 5, 0xdddddd);
        this.binLabelDivider.setDepth(5);

        this.lastPageButton = this.add.rectangle(deviceWidth * 0.053, deviceHeight * 0.97, deviceWidth * 0.105, deviceWidth * 0.03, 0xffffff);
        this.lastPageButton.setAlpha(0.3);
        this.lastPageButton.enableClick();
        this.lastPageButton.setDepth(5);
        this.lastPageArrow = this.add.sprite(deviceWidth * 0.053, deviceHeight * 0.97, "binhandlearrow");
        this.lastPageArrow.setScale(deviceWidth * 0.00003);
        this.lastPageArrow.setAngle(-90);
        this.lastPageArrow.enableClick();
        this.lastPageArrow.setDepth(5);

        this.nextPageButton = this.add.rectangle(deviceWidth * 0.157, deviceHeight * 0.97, deviceWidth * 0.105, deviceWidth * 0.03, 0xffffff);
        this.nextPageButton.setAlpha(0.3);
        this.nextPageButton.enableClick();
        this.nextPageButton.setDepth(5);
        this.nextPageArrow = this.add.sprite(deviceWidth * 0.157, deviceHeight * 0.97, "binhandlearrow");
        this.nextPageArrow.setScale(deviceWidth * 0.00003);
        this.nextPageArrow.setAngle(90);
        this.nextPageArrow.enableClick();
        this.nextPageArrow.setDepth(5);

        this.itemTypeButton = this.add.circle(deviceWidth * 0.18, deviceHeight * 0.05, deviceWidth * 0.05, 0xF4F5F6);
        this.itemTypeButton.enableClick();
        this.itemTypeButton.setAlpha(0);
        this.itemTypeButton.setDepth(5);

        this.itemTypeArrow = this.add.sprite(deviceWidth * 0.18, deviceHeight * 0.05, "swap");
        this.itemTypeArrow.setScale(deviceWidth * 0.0005);
        this.itemTypeArrow.enableClick();
        this.itemTypeArrow.setDepth(5);

        this.addItem = this.add.sprite(deviceWidth * 0.14, deviceHeight * 0.05, "add");
        this.addItem.setScale(deviceWidth * 0.00035);
        this.addItem.enableClick();
        this.addItem.setDepth(5);

        objectID = 0;
        this.items = [];
        this.itemLabels = [];
        var v = 0;
        for (var i = 0; i < objectsData.length / 5; i++) {
            if (v < 8) {
                var obj;
                var label;
                if (i % 2 == 0) {
                    obj = this.add.sprite(deviceWidth * 0.05, (Math.floor(i / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                    label = this.add.text(deviceWidth * 0.05, (Math.floor(i / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                }
                if (i % 2 == 1) {
                    obj = this.add.sprite(deviceWidth * 0.15, (Math.floor(i / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                    label = this.add.text(deviceWidth * 0.15, (Math.floor(i / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                }
                obj.scale *= (objectsData[(i * 5) + 2]);
                obj.width *= (objectsData[(i * 5) + 2]);
                obj.height *= (objectsData[(i * 5) + 2])
                obj.width *= 10;
                obj.height *= 10;
                while (obj.width < deviceWidth * 0.5 && obj.height < deviceHeight * 0.6) {
                    obj.width *= 1.1;
                    obj.scale *= 1.1;
                    obj.height *= 1.1;
                }
                while (obj.width > deviceWidth * 0.6 || obj.height > deviceHeight) {
                    obj.width *= 0.9;
                    obj.scale *= 0.9;
                    obj.height *= 0.9;
                }
                obj.width *= 0.75;
                obj.height *= 0.75;
                obj.enableClick();
                this.items.push(obj);
                itemObjectID.push(objectID);
                label.setOrigin(0.5, 0);
                label.setFontSize(deviceHeight * 0.025)
                this.itemLabels.push(label);
                objectID++;
                v++;
            }
        }

        this.objects = [];
        var object = this.objects;
        this.objectIDs = [];
        this.objectLabels = [];

        this.wires = [];
        this.wireLines = [];
        lineWidth = 8 * scaleCount;
        this.activeWire = this.add.line(0, 0, 0, 0, 0xED4040);
        this.activeWire.setLineWidth(3.8 * scaleCount);

        this.nodes = [];
        var nodes = this.nodes;

        this.leftarrow = this.add.key("LEFT");
        this.rightarrow = this.add.key("RIGHT");
        this.uparrow = this.add.key("UP");
        this.downarrow = this.add.key("DOWN")
        this.shift = this.add.key("SHIFT");
        this.space = this.add.key("SPACE");
        this.del = this.add.key("BACKSPACE");
        this.esc = this.add.key("ESC");
        this.return = this.add.key("ENTER");
        this.s = this.add.key("S");
        this.w = this.add.key("w");
        this.d = this.add.key("D");
        this.z = this.add.key("Z");
        this.x = this.add.key("X");

        this.key0 = this.add.key("ZERO");
        this.key1 = this.add.key("ONE");
        this.key2 = this.add.key("TWO");
        this.key3 = this.add.key("THREE");
        this.key4 = this.add.key("FOUR");
        this.key5 = this.add.key("FIVE");
        this.key6 = this.add.key("SIX");
        this.key7 = this.add.key("SEVEN");
        this.key8 = this.add.key("EIGHT");
        this.key9 = this.add.key("NINE");

        this.increaseScaleButton = this.add.circle(deviceWidth * 0.83, deviceHeight * 0.94, deviceWidth * 0.02, 0xF4F5F6);
        this.increaseScaleButton.enableClick();
        this.increaseScaleButton.setAlpha(0.01);
        this.increaseScaleButton.setDepth(5);

        this.decreaseScaleButton = this.add.circle(deviceWidth * 0.785, deviceHeight * 0.94, deviceWidth * 0.02, 0xF4F5F6);
        this.decreaseScaleButton.enableClick();
        this.decreaseScaleButton.setAlpha(0.01);
        this.decreaseScaleButton.setDepth(5);

        this.increaseScale = this.add.sprite(deviceWidth * 0.83, deviceHeight * 0.94, "increasescale");
        this.increaseScale.setScale(deviceWidth * 0.000035);
        this.increaseScale.enableClick();
        this.increaseScale.setDepth(5);

        this.decreaseScale = this.add.sprite(deviceWidth * 0.785, deviceHeight * 0.94, "decreasescale");
        this.decreaseScale.setScale(deviceWidth * 0.000035);
        this.decreaseScale.enableClick();
        this.decreaseScale.setDepth(5);

        this.saveButton = this.add.rectangle(deviceWidth * 0.9, deviceHeight * 0.94, deviceWidth * 0.07, deviceHeight * 0.075, 0x4FBA52);
        this.saveButton.enableClick();
        this.saveButton.setDepth(5);

        this.save = this.add.text(deviceWidth * 0.9, deviceHeight * 0.94, "Save");
        this.save.setOrigin(0.5, 0.5);
        this.save.setFontSize(deviceHeight * 0.03);
        this.save.enableClick();
        this.save.setDepth(5);

        this.saved = this.add.sprite(deviceWidth * 0.9, deviceHeight * 0.94, "saved");
        this.saved.setScale(deviceWidth * 0.0004);
        this.saved.setVisible(0);
        this.saved.setDepth(5);

        this.home = this.add.sprite(deviceWidth * 0.965, deviceHeight * 0.94, "home");
        this.home.setScale(deviceWidth * 0.00012)
        this.home.enableClick();
        this.home.setDepth(5);

        this.info = this.add.sprite(deviceWidth * 0.965, deviceHeight * 0.06, "info");
        this.info.setScale(deviceWidth * 0.0004);
        this.info.enableClick();
        this.info.setDepth(5);

        this.magnet = this.add.sprite(deviceWidth * 0.735, deviceHeight * 0.945, "magnet");
        this.magnet.setScale(deviceWidth * 0.0005);
        this.magnet.enableClick();
        this.magnet.setDepth(5);

        this.slash = this.add.sprite(deviceWidth * 0.735, deviceHeight * 0.95, "slash");
        this.slash.setScale(deviceWidth * 0.0004);
        this.slash.enableClick();
        this.slash.setVisible(0);
        this.slash.setDepth(5);

        this.grid = this.add.gridLayout(snapStartX, snapStartY, 100000, 100000, 28 * scaleCount, 28 * scaleCount);
        this.grid.setOutlineStyle(0xdddddd, 0.5)
        this.grid.setDepth(0);
        this.grid.enableClick();
        grid = this.grid;

        this.redo = this.add.sprite(deviceWidth * 0.685, deviceHeight * 0.945, "undo");
        this.redo.setScale(deviceWidth * 0.0005);
        this.redo.flipX = true;
        this.redo.setDepth(5);
        this.redo.enableClick();

        this.undo = this.add.sprite(deviceWidth * 0.635, deviceHeight * 0.945, "undo");
        this.undo.setScale(deviceWidth * 0.0005);
        this.undo.setDepth(5);
        this.undo.enableClick();

        this.wiringPointer = this.add.circle(0, 0, 8 * scaleCount, 0xED4040);

        var pointer = this.input.activePointer;

        this.input.on('wheel', function (pointer, gameObjects, deltaX, deltaY) {

            grid.x -= deltaX * 0.2;
            grid.y -= deltaY * 0.2;
            snapStartX -= deltaX * 0.2;
            snapStartY -= deltaY * 0.2;

            for (var i = 0; i < object.length; i++) {
                object[i].x -= deltaX * 0.2;
                object[i].y -= deltaY * 0.2;
            }
            for (var i = 0; i < nodes.length; i++) {
                nodes[i].x -= deltaX * 0.2;
                nodes[i].y -= deltaY * 0.2;
            }

            if (lastPosition[1] != deviceWidth * 0.05 && lastPosition[2] != deviceHeight * 0.22) {
                lastPosition[1] -= deltaX * 0.2;
                lastPosition[2] -= deltaY * 0.2;
            }

        });

        this.popupover = this.add.rectangle(deviceWidth / 2, deviceHeight / 2, deviceWidth, deviceHeight, 0xffffff);
        this.popupover.setAlpha(0.5);
        this.popupover.setDepth(8);
        this.popupover.setVisible(0);
        this.popup = this.add.rectangle(deviceWidth / 2, deviceHeight / 2, deviceWidth * 0.6, deviceHeight * 0.3, 0xcccccc);
        this.popup.setDepth(9);
        this.popup.setVisible(0);
        this.popuptext = this.add.text(deviceWidth / 2, deviceHeight * 0.45, "Are you sure you want to leave? You will lose your work.", 0x000000);
        this.popuptext.setOrigin(0.5, 0.5);
        this.popuptext.setFontSize(deviceHeight * 0.04);
        this.popuptext.setDepth(9);
        this.popuptext.setVisible(0);

        this.popupcancel = this.add.rectangle(deviceWidth * 0.44, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0xaaaaaa);
        this.popupcancel.width = deviceWidth * 0.1;
        this.popupcancel.height = deviceHeight * 0.05;
        this.popupcancel.enableClick();
        this.popupcancel.setDepth(9);
        this.popupcancel.setVisible(0);
        this.popupyes = this.add.rectangle(deviceWidth * 0.56, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0xed4040);
        this.popupyes.width = deviceWidth * 0.1;
        this.popupyes.height = deviceHeight * 0.05;
        this.popupyes.setDepth(9);
        this.popupyes.enableClick();
        this.popupyes.setVisible(0);
        this.popupcanceltext = this.add.text(deviceWidth * 0.44, deviceHeight * 0.55, "Cancel", 0x000000);
        this.popupcanceltext.setOrigin(0.5, 0.5);
        this.popupcanceltext.setFontSize(deviceHeight * 0.03);
        this.popupcanceltext.enableClick();
        this.popupcanceltext.setDepth(10);
        this.popupcanceltext.setVisible(0);
        this.popupyestext = this.add.text(deviceWidth * 0.56, deviceHeight * 0.55, "Yes", 0x000000);
        this.popupyestext.setOrigin(0.5, 0.5);
        this.popupyestext.setFontSize(deviceHeight * 0.03);
        this.popupyestext.enableClick();
        this.popupyestext.setDepth(10);
        this.popupyestext.setVisible(0);

        this.popupdone = this.add.rectangle(deviceWidth * 0.44, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0xaaaaaa);
        this.popupdone.width = deviceWidth * 0.1;
        this.popupdone.height = deviceHeight * 0.05;
        this.popupdone.enableClick();
        this.popupdone.setDepth(9);
        this.popupdone.setVisible(0);
        this.popupcreate = this.add.rectangle(deviceWidth * 0.56, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0x4FBA52);
        this.popupcreate.width = deviceWidth * 0.1;
        this.popupcreate.height = deviceHeight * 0.05;
        this.popupcreate.enableClick();
        this.popupcreate.setDepth(9);
        this.popupcreate.setVisible(0);
        this.popupdonetext = this.add.text(deviceWidth * 0.44, deviceHeight * 0.55, "Done", 0x000000);
        this.popupdonetext.setOrigin(0.5, 0.5);
        this.popupdonetext.setFontSize(deviceHeight * 0.03);
        this.popupdonetext.enableClick();
        this.popupdonetext.setDepth(10);
        this.popupdonetext.setVisible(0);
        this.popupcreatetext = this.add.text(deviceWidth * 0.56, deviceHeight * 0.55, "Create Image", 0x000000);
        this.popupcreatetext.setOrigin(0.5, 0.5);
        this.popupcreatetext.setFontSize(deviceHeight * 0.03);
        this.popupcreatetext.enableClick();
        this.popupcreatetext.setDepth(10);
        this.popupcreatetext.setVisible(0);

        this.popupcandel = this.add.rectangle(deviceWidth * 0.44, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0xaaaaaa);
        this.popupcandel.widht = deviceWidth * 0.1;
        this.popupcandel.height = deviceHeight * 0.05;
        this.popupcandel.enableClick();
        this.popupcandel.setDepth(9);
        this.popupcandel.setVisible(0);
        this.popupdel = this.add.rectangle(deviceWidth * 0.56, deviceHeight * 0.55, deviceWidth * 0.1, deviceHeight * 0.05, 0xed4040);
        this.popupdel.widht = deviceWidth * 0.1;
        this.popupdel.height = deviceHeight * 0.05;
        this.popupdel.enableClick();
        this.popupdel.setDepth(9);
        this.popupdel.setVisible(0);
        this.popupcandeltext = this.add.text(deviceWidth * 0.44, deviceHeight * 0.55, "Cancel", 0x000000);
        this.popupcandeltext.setOrigin(0.5, 0.5);
        this.popupcandeltext.setFontSize(deviceHeight * 0.03);
        this.popupcandeltext.enableClick();
        this.popupcandeltext.setDepth(10);
        this.popupcandeltext.setVisible(0);
        this.popupdeltext = this.add.text(deviceWidth * 0.56, deviceHeight * 0.55, "Delete", 0x000000);
        this.popupdeltext.setOrigin(0.5, 0.5);
        this.popupdeltext.setFontSize(deviceHeight * 0.03);
        this.popupdeltext.enableClick();
        this.popupdeltext.setDepth(10);
        this.popupdeltext.setVisible(0);

        this.panel = this.add.rectangle(deviceWidth * 0.95, deviceHeight * 0.2, deviceWidth * 0.2, deviceHeight * 0.7, 0xDDDDDD);
        this.panel.setDepth(5);
        this.panel.setVisible(0);

        this.paneltext = this.add.text(deviceWidth * 0.865, deviceHeight * 0.04, "Wire", 0x000000);
        this.paneltext.setFontSize(deviceHeight * 0.03);
        this.paneltext.setOrigin(0, 0.5);
        this.paneltext.setDepth(5);
        this.paneltext.setVisible(0);

        this.panelDivider = this.add.line(deviceWidth * 0.86, deviceHeight * 0.07, deviceWidth * 0.99, deviceHeight * 0.07, 5, 0xdddddd);
        this.panelDivider.setDepth(5);
        this.panelDivider.setVisible(0);

        this.panelSelectLabel = this.add.text(deviceWidth * 0.925, deviceHeight * 0.19, "Color", 0x999999);
        this.panelSelectLabel.setFontSize(deviceHeight * 0.025);
        this.panelSelectLabel.setOrigin(0.5, 0.5);
        this.panelSelectLabel.setDepth(5);
        this.panelSelectLabel.setVisible(0);

        this.panelSelectLabel2 = this.add.text(deviceWidth * 0.925, deviceHeight * 0.38, "Custom Colors", 0x999999);
        this.panelSelectLabel2.setFontSize(deviceHeight * 0.025);
        this.panelSelectLabel2.setOrigin(0.5, 0.5);
        this.panelSelectLabel2.setDepth(5);
        this.panelSelectLabel2.setVisible(0);

        this.panelWireDeleteButton = this.add.rectangle(deviceWidth * 0.925, deviceHeight * 0.12, deviceWidth * 0.13, deviceHeight * 0.06, 0xED4040);
        this.panelWireDeleteButton.enableClick();
        this.panelWireDeleteButton.setDepth(5);
        this.panelWireDeleteButton.setVisible(0);

        this.panelWireDeleteIcon = this.add.sprite(deviceWidth * 0.885, deviceHeight * 0.12, "trash");
        this.panelWireDeleteIcon.setScale(deviceWidth * 0.0002);
        this.panelWireDeleteIcon.enableClick();
        this.panelWireDeleteIcon.setDepth(5);
        this.panelWireDeleteIcon.setVisible(0);

        this.panelWireDeleteText = this.add.text(deviceWidth * 0.9, deviceHeight * 0.12, "Delete Wire", 0xffffff);
        this.panelWireDeleteText.setOrigin(0, 0.5);
        this.panelWireDeleteText.enableClick();
        this.panelWireDeleteText.setDepth(5);
        this.panelWireDeleteText.setVisible(0);

        this.panelWireAddNodeButton = this.add.rectangle(deviceWidth * 0.925, deviceHeight * 0.19, deviceWidth * 0.13, deviceHeight * 0.06, 0x4FBA52);
        this.panelWireAddNodeButton.enableClick();
        this.panelWireAddNodeButton.setDepth(5);
        this.panelWireAddNodeButton.setVisible(0);

        this.panelWireAddNodeIcon = this.add.sprite(deviceWidth * 0.885, deviceHeight * 0.19, "addnode");
        this.panelWireAddNodeIcon.setScale(deviceWidth * 0.0002);
        this.panelWireAddNodeIcon.enableClick();
        this.panelWireAddNodeIcon.setDepth(5);
        this.panelWireAddNodeIcon.setVisible(0);

        this.panelWireAddNodeText = this.add.text(deviceWidth * 0.9, deviceHeight * 0.19, "Add Node", 0xffffff);
        this.panelWireAddNodeText.setOrigin(0, 0.5);
        this.panelWireAddNodeText.enableClick();
        this.panelWireAddNodeText.setDepth(5);
        this.panelWireAddNodeText.setVisible(0);

        this.panelDuplicateButton = this.add.rectangle(deviceWidth * 0.872, deviceHeight * 0.12, deviceWidth * 0.028, deviceWidth * 0.028, 0xaaaaaa);
        this.panelDuplicateButton.enableClick();
        this.panelDuplicateButton.setDepth(5);
        this.panelDuplicateButton.setVisible(0);

        this.panelDuplicate = this.add.sprite(deviceWidth * 0.872, deviceHeight * 0.12, "duplicate");
        this.panelDuplicate.setScale(deviceWidth * 0.0002);
        this.panelDuplicate.enableClick();
        this.panelDuplicate.setDepth(5);
        this.panelDuplicate.setVisible(0);

        this.panelDeleteButton = this.add.rectangle(deviceWidth * 0.907, deviceHeight * 0.12, deviceWidth * 0.028, deviceWidth * 0.028, 0xED4040);
        this.panelDeleteButton.enableClick();
        this.panelDeleteButton.setDepth(5);
        this.panelDeleteButton.setVisible(0);

        this.panelDelete = this.add.sprite(deviceWidth * 0.907, deviceHeight * 0.12, "trash");
        this.panelDelete.setScale(deviceWidth * 0.0002);
        this.panelDelete.enableClick();
        this.panelDelete.setDepth(5);
        this.panelDelete.setVisible(0);

        this.panelEditButton = this.add.rectangle(deviceWidth * 0.96, deviceHeight * 0.12, deviceWidth * 0.062, deviceWidth * 0.028, 0x000000);
        this.panelEditButton.enableClick();
        this.panelEditButton.setDepth(5);
        this.panelEditButton.setVisible(0);

        this.panelEditIcon = this.add.sprite(deviceWidth * 0.943, deviceHeight * 0.12, "edit");
        this.panelEditIcon.setScale(deviceWidth * 0.0002);
        this.panelEditIcon.enableClick();
        this.panelEditIcon.setDepth(5);
        this.panelEditIcon.setVisible(0);

        this.panelEditText = this.add.text(deviceWidth * 0.96, deviceHeight * 0.12, "Edit", 0xffffff);
        this.panelEditText.setOrigin(0, 0.5)
        this.panelEditText.enableClick();
        this.panelEditText.setDepth(5);
        this.panelEditText.setVisible(0);

        this.panelUpArrow = this.add.sprite(deviceWidth * 0.925, deviceHeight * 0.20, "arrow");
        this.panelUpArrow.setAngle(180);
        this.panelUpArrow.setScale(deviceWidth * 0.00035);
        this.panelUpArrow.enableClick();
        this.panelUpArrow.setDepth(5);
        this.panelUpArrow.setVisible(0);

        this.panelLeftArrow = this.add.sprite(deviceWidth * 0.87, deviceHeight * 0.27, "arrow");
        this.panelLeftArrow.setAngle(90);
        this.panelLeftArrow.setScale(deviceWidth * 0.00035);
        this.panelLeftArrow.enableClick();
        this.panelLeftArrow.setDepth(5);
        this.panelLeftArrow.setVisible(0);

        this.panelRightArrow = this.add.sprite(deviceWidth * 0.98, deviceHeight * 0.27, "arrow");
        this.panelRightArrow.setAngle(-90);
        this.panelRightArrow.setScale(deviceWidth * 0.00035);
        this.panelRightArrow.enableClick();
        this.panelRightArrow.setDepth(5);
        this.panelRightArrow.setVisible(0);

        this.panelDownArrow = this.add.sprite(deviceWidth * 0.925, deviceHeight * 0.34, "arrow");
        this.panelDownArrow.setScale(deviceWidth * 0.00035);
        this.panelDownArrow.enableClick();
        this.panelDownArrow.setDepth(5);
        this.panelDownArrow.setVisible(0);

        this.panelRotateLeft = this.add.sprite(deviceWidth * 0.906, deviceHeight * 0.27, "rotate");
        this.panelRotateLeft.setScale(deviceWidth * 0.0006);
        this.panelRotateLeft.enableClick();
        this.panelRotateLeft.setDepth(5);
        this.panelRotateLeft.setVisible(0);

        this.panelRotateRight = this.add.sprite(deviceWidth * 0.944, deviceHeight * 0.27, "rotate");
        this.panelRotateRight.flipX = true;
        this.panelRotateRight.setScale(deviceWidth * 0.0006);
        this.panelRotateRight.enableClick();
        this.panelRotateRight.setDepth(5);
        this.panelRotateRight.setVisible(0);

        this.panelBackward = this.add.sprite(deviceWidth * 0.88, deviceHeight * 0.35, "backward");
        this.panelBackward.setScale(deviceWidth * 0.0005);
        this.panelBackward.enableClick();
        this.panelBackward.setDepth(5);
        this.panelBackward.setVisible(0);

        this.panelForward = this.add.sprite(deviceWidth * 0.97, deviceHeight * 0.35, "forward");
        this.panelForward.setScale(deviceWidth * 0.0005);
        this.panelForward.enableClick();
        this.panelForward.setDepth(5);
        this.panelForward.setVisible(0);

        this.palette = [];
        this.customColors = [];
        this.closex = this.add.sprite(deviceWidth * 0.985, deviceHeight * 0.035, "x")
        this.closex.setScale(deviceWidth * 0.0002);
        this.closex.enableClick();
        this.closex.setDepth(5);
        this.closex.setVisible(0);

        this.selected = [];
        this.shiftSelect = [];

        this.objectColors = [];
        this.customObjectColors = [];
    }

    update() {

        element = document.querySelector(":focus");

        if (!(element == document.getElementById('input') || element == document.getElementById('dropdown') || element == document.getElementById('inputnum'))) {
            if (element != null) {
                element.blur();
            }
        }

        if (down == true) {
            down = false;
        }
        if (this.input.activePointer.isDown == true && up == true) {
            down = true;
            up = false;
        }
        if (this.input.activePointer.isDown == false) {
            up = true;
        }

        const pElement = document.getElementsByTagName("body")[0];
        pElement.style.cursor = "url('https://i.ibb.co/hsnxb67/icons8-cursor-30.png'), auto";

        if (this.home.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.home.setAlpha(0.5);
        } else {
            this.home.setAlpha(1);
        }

        if (this.info.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.info.setAlpha(0.5);
        } else {
            this.info.setAlpha(1);
        }

        if (this.popupcancel.isOver() || this.popupcanceltext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupcancel.fillColor = 0xeeeeee;
        } else {
            this.popupcancel.fillColor = 0xaaaaaa;
        }

        if (this.popupyes.isOver() || this.popupyestext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupyes.fillColor = 0xff9999;
        } else {
            this.popupyes.fillColor = 0xed4040;
        }

        if (this.popupdel.isOver() || this.popupdeltext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupdel.fillColor = 0xff9999;
        } else {
            this.popupdel.fillColor = 0xed4040;
        }

        if (this.popupcandel.isOver() || this.popupcandeltext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupcandel.fillColor = 0xeeeeee;
        } else {
            this.popupcandel.fillColor = 0xaaaaaa;
        }

        if (this.popupdone.isOver() || this.popupdonetext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupdone.fillColor = 0xeeeeee;
        } else {
            this.popupdone.fillColor = 0xaaaaaa;
        }

        if (this.popupcreate.isOver() || this.popupcreatetext.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.popupcreate.fillColor = 0x99ff99;
        } else {
            this.popupcreate.fillColor = 0x4FBA52;
        }

        if (this.save.isOver() || this.saveButton.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.saveButton.fillColor = 0x99ff99;
        } else {
            this.saveButton.fillColor = 0x3fce29;
        }

        if (this.increaseScale.isOver() || this.increaseScaleButton.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.increaseScale.setAlpha(0.5);
        } else {
            this.increaseScale.setAlpha(1);
        }

        if (this.decreaseScale.isOver() || this.decreaseScaleButton.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.decreaseScale.setAlpha(0.5);
        } else {
            this.decreaseScale.setAlpha(1);
        }

        if (this.magnet.isOver() || this.slash.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.magnet.setAlpha(0.5);
            this.slash.setAlpha(0.5);
        } else {
            this.magnet.setAlpha(1);
            this.slash.setAlpha(1);
        }

        if (this.binHandle.isOver() || this.binHandleArrow.isOver() || this.itemTypeArrow.isOver() || this.itemTypeButton.isOver() || this.addItem.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
        }

        if (this.undo.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.undo.setAlpha(0.5);
        } else {
            if (undo.length > 0) {
                this.undo.setAlpha(1);
            } else {
                this.undo.setAlpha(0.5);
            }
        }

        if (this.redo.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.redo.setAlpha(0.5);
        } else {
            if (redo.length > 0) {
                this.redo.setAlpha(1);
            } else {
                this.redo.setAlpha(0.5);
            }
        }

        if (this.lastPageButton.isOver() || this.lastPageArrow.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.lastPageButton.setAlpha(1);
        } else {
            this.lastPageButton.setAlpha(0.3);
        }

        if (this.nextPageButton.isOver() || this.nextPageArrow.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            this.nextPageButton.setAlpha(1);
        } else {
            this.nextPageButton.setAlpha(0.3);
        }

        if (this.closex.isOver()) {
            pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
        }

        if ((this.panel.visible == true || activeWire == true)) {
            if (this.closex.wasClicked() || (element == null && this.esc.wasPressed())) {
                activeWire = false;
                this.activeWire.setVisible(0);
                this.clearPanel();
            }
        }

        for (var i = 0; i < this.wireLines.length; i++) {
            this.wireLines[i].setDepth(3.5);
        }

        for (var i = 0; i < this.wires.length; i++) {
            this.wires[i].setDepth(3.5);
            if (this.wires[i].isOver()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                this.wires[i].alpha = 0.5;

                for (var v = 0; v < this.selected.length; v++) {
                    this.selected[v] = -1;
                }

                if (this.w.wasPressed()) {
                    var node;
                    var node2;
                    if (this.wireLines[i].geom.y1 != this.wireLines[i].geom.y2 && this.wireLines[i].geom.x1 != this.wireLines[i].geom.x2) {
                        node = this.add.circle((this.input.mousePointer.y - this.wireLines[i].geom.y1) / ((this.wireLines[i].geom.y1 - this.wireLines[i].geom.y2) / (this.wireLines[i].geom.x1 - this.wireLines[i].geom.x2)) + this.wireLines[i].geom.x1, this.input.mousePointer.y, 8 * scaleCount, 0xffffff);
                        node2 = this.add.circle((this.input.mousePointer.y - this.wireLines[i].geom.y1) / ((this.wireLines[i].geom.y1 - this.wireLines[i].geom.y2) / (this.wireLines[i].geom.x1 - this.wireLines[i].geom.x2)) + this.wireLines[i].geom.x1, this.input.mousePointer.y, 8 * scaleCount, this.wires[i].fillColor);

                    } else {
                        node = this.add.circle(this.input.mousePointer.x, this.wireLines[i].geom.y1, 8 * scaleCount, 0xffffff);
                        node2 = this.add.circle(this.input.mousePointer.x, this.wireLines[i].geom.y1, 8 * scaleCount, this.wires[i].fillColor);
                    }
                    this.nodes.push(node);
                    node2.enableClick();
                    node2.enableDrag();
                    this.nodes.push(node2);
                    var selectWireGroup;
                    for (var v = 0; v < this.nodes.length; v++) {
                        if (nodeLinks[v * 4] == i || ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] == -3 || nodeLinks[v * 4] <= -4) && nodeLinks[(v * 4) + 2] == i)) {
                            selectWireGroup = nodeLinks[(v * 4) + 3]
                        }
                    }
                    nodeLinks.push(-3);
                    nodeLinks.push(i);
                    nodeLinks.push(this.wireLines.length);
                    nodeLinks.push(selectWireGroup)
                    nodeLinks.push(-2);
                    nodeLinks.push(i);
                    nodeLinks.push(this.wireLines.length + 1);
                    nodeLinks.push(selectWireGroup);
                    var obj = this.add.line(this.wireLines[i].geom.x1, this.wireLines[i].geom.y1, node.x, node.y, 0xffffff);
                    obj.setLineWidth(3.8 * scaleCount);
                    var obj2 = this.add.line(this.wireLines[i].geom.x2, this.wireLines[i].geom.y2, node.x, node.y, 0xffffff);
                    obj2.setLineWidth(3.8 * scaleCount);
                    this.wireLines[i].setVisible(0);
                    this.wires[i].setVisible(0);
                    this.wireLines.push(obj);
                    this.wireLines.push(obj2);
                    var obj3 = this.add.rectangle((obj.geom.x1 + obj.geom.x2) / 2, (obj.geom.y1 + obj.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj.geom.x1 - obj.geom.x2), 2) + Math.pow(Math.abs(obj.geom.y1 - obj.geom.y2), 2))), this.wires[i].fillColor);
                    obj3.setAngle(-(Math.atan(Math.abs(obj.geom.x1 - obj.geom.x2) / Math.abs(obj.geom.y1 - obj.geom.y2))) * (180 / Math.PI));
                    var obj4 = this.add.rectangle((obj2.geom.x1 + obj2.geom.x2) / 2, (obj2.geom.y1 + obj2.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj2.geom.x1 - obj2.geom.x2), 2) + Math.pow(Math.abs(obj2.geom.y1 - obj2.geom.y2), 2))), this.wires[i].fillColor);
                    obj4.setAngle(-(Math.atan(Math.abs(obj2.geom.x1 - obj2.geom.x2) / Math.abs(obj2.geom.y1 - obj2.geom.y2))) * (180 / Math.PI));
                    obj3.enableClick();
                    obj4.enableClick();
                    this.wires.push(obj3);
                    this.wires.push(obj4);

                    undo.push("subdividedWire");
                    undo.push(this.nodes.length - 2);
                    undo.push(nodeLinks.length - 8);
                    undo.push(nodeLinks.length - 4);
                    redo.splice(0, redo.length);
                    this.clearPanel();
                }
            } else {
                this.wires[i].alpha = 1;
            }
            if (this.wires[i].wasClicked()) {
                lastWire = i;
                wireClick++;
                this.createPalette();

                if (wireClick == 2) {
                    wireClick = 0;
                    clickTime = 0;
                    this.clearPanel();
                    var node;
                    var node2;
                    if (this.wireLines[i].geom.y1 != this.wireLines[i].geom.y2 && this.wireLines[i].geom.x1 != this.wireLines[i].geom.x2) {
                        node = this.add.circle((this.input.mousePointer.y - this.wireLines[i].geom.y1) / ((this.wireLines[i].geom.y1 - this.wireLines[i].geom.y2) / (this.wireLines[i].geom.x1 - this.wireLines[i].geom.x2)) + this.wireLines[i].geom.x1, this.input.mousePointer.y, 8 * scaleCount, 0xffffff);
                        node2 = this.add.circle((this.input.mousePointer.y - this.wireLines[i].geom.y1) / ((this.wireLines[i].geom.y1 - this.wireLines[i].geom.y2) / (this.wireLines[i].geom.x1 - this.wireLines[i].geom.x2)) + this.wireLines[i].geom.x1, this.input.mousePointer.y, 8 * scaleCount, this.wires[i].fillColor);

                    } else {
                        node = this.add.circle(this.input.mousePointer.x, this.wireLines[i].geom.y1, 8 * scaleCount, 0xffffff);
                        node2 = this.add.circle(this.input.mousePointer.x, this.wireLines[i].geom.y1, 8 * scaleCount, this.wires[i].fillColor);
                    }
                    this.nodes.push(node);
                    node2.enableClick();
                    node2.enableDrag();
                    this.nodes.push(node2);
                    var selectWireGroup;
                    for (var v = 0; v < this.nodes.length; v++) {
                        if (nodeLinks[v * 4] == i || ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] == -3 || nodeLinks[v * 4] <= -4) && nodeLinks[(v * 4) + 2] == i)) {
                            selectWireGroup = nodeLinks[(v * 4) + 3]
                        }
                    }
                    nodeLinks.push(-3);
                    nodeLinks.push(i);
                    nodeLinks.push(this.wireLines.length);
                    nodeLinks.push(selectWireGroup)
                    nodeLinks.push(-2);
                    nodeLinks.push(i);
                    nodeLinks.push(this.wireLines.length + 1);
                    nodeLinks.push(selectWireGroup);
                    var obj = this.add.line(this.wireLines[i].geom.x1, this.wireLines[i].geom.y1, node.x, node.y, 0xffffff);
                    obj.setLineWidth(3.8 * scaleCount);
                    var obj2 = this.add.line(this.wireLines[i].geom.x2, this.wireLines[i].geom.y2, node.x, node.y, 0xffffff);
                    obj2.setLineWidth(3.8 * scaleCount);
                    this.wireLines[i].setVisible(0);
                    this.wires[i].setVisible(0);
                    this.wireLines.push(obj);
                    this.wireLines.push(obj2);
                    var obj3 = this.add.rectangle((obj.geom.x1 + obj.geom.x2) / 2, (obj.geom.y1 + obj.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj.geom.x1 - obj.geom.x2), 2) + Math.pow(Math.abs(obj.geom.y1 - obj.geom.y2), 2))), this.wires[i].fillColor);
                    obj3.setAngle(-(Math.atan(Math.abs(obj.geom.x1 - obj.geom.x2) / Math.abs(obj.geom.y1 - obj.geom.y2))) * (180 / Math.PI));
                    var obj4 = this.add.rectangle((obj2.geom.x1 + obj2.geom.x2) / 2, (obj2.geom.y1 + obj2.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj2.geom.x1 - obj2.geom.x2), 2) + Math.pow(Math.abs(obj2.geom.y1 - obj2.geom.y2), 2))), this.wires[i].fillColor);
                    obj4.setAngle(-(Math.atan(Math.abs(obj2.geom.x1 - obj2.geom.x2) / Math.abs(obj2.geom.y1 - obj2.geom.y2))) * (180 / Math.PI));
                    obj3.enableClick();
                    obj4.enableClick();
                    this.wires.push(obj3);
                    this.wires.push(obj4);

                    undo.push("subdividedWire");
                    undo.push(this.nodes.length - 2);
                    undo.push(nodeLinks.length - 8);
                    undo.push(nodeLinks.length - 4);
                    redo.splice(0, redo.length);
                }
            }
            this.wireColorShortKeys(i);
        }

        for (var i = 0; i < this.nodes.length; i++) {
            this.nodes[i].setDepth(4);
            if (nodeLinks[i * 4] == -2) {
                if (this.nodes[i].isOver()) {
                    this.nodes[i].alpha = 0.5;
                    pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                } else {
                    this.nodes[i].alpha = 1;
                }
                if (this.nodes[i].isClicked()) {
                    if (this.slash.visible == 0) {
                        for (var v = -10000; v < 10000; v++) {
                            if (Math.abs(((v * 28 * scaleCount + (snapStartX % (28 * scaleCount))) - this.nodes[i].x)) < (28 * scaleCount) / 2 && Math.abs(((v * 28 * scaleCount + (snapStartX % (28 * scaleCount))) - this.nodes[i].x)) > 0) {
                                this.nodes[i].x = (v * 28 * scaleCount + (snapStartX % (28 * scaleCount)));
                            }
                        }
                        for (var v = -10000; v < 10000; v++) {

                            if (Math.abs(((v * 28 * scaleCount + (snapStartY % (28 * scaleCount))) - this.nodes[i].y)) < (28 * scaleCount) / 2 && Math.abs(((v * 28 * scaleCount + (snapStartY % (28 * scaleCount))) - this.nodes[i].y)) > 0) {
                                this.nodes[i].y = (v * 28 * scaleCount + (snapStartY % (28 * scaleCount)));
                            }
                        }
                    } else {
                        for (var v = 0; v < this.nodes.length; v++) {
                            if (this.nodes[i].x > this.nodes[v].x - 10 && this.nodes[i].x < this.nodes[v].x + 10 && i != v && nodeLinks[(i * 4)] != -3) {
                                this.nodes[i].x = this.nodes[v].x;
                            }
                            if (this.nodes[i].y > this.nodes[v].y - 10 && this.nodes[i].y < this.nodes[v].y + 10 && i != v && nodeLinks[(i * 4)] != -3) {
                                this.nodes[i].y = this.nodes[v].y;
                            }
                        }
                    }
                }
                if (this.nodes[i].wasClicked()) {
                    lastPosition[0] = i;
                    lastPosition[1] = this.nodes[i].x;
                    lastPosition[2] = this.nodes[i].y;
                }
                if (i == lastPosition[0] && !(this.nodes[i].isClicked()) && (lastPosition[1] != this.nodes[i].x || lastPosition[2] != this.nodes[i].y)) {
                    undo.push("movedNode");
                    undo.push(i);
                    undo.push(lastPosition[1] - this.nodes[i].x);
                    undo.push(lastPosition[2] - this.nodes[i].y);
                    lastPosition[1] = this.nodes[i].x;
                    lastPosition[2] = this.nodes[i].y;
                    redo.splice(0, redo.length);
                }
            }
        }

        if (panelType == 1) {
            if (this.palette.length > 0) {
                for (var i = 0; i < 10; i++) {
                    this.palette[i].setDepth(6);
                    if (this.palette[i].isOver()) {
                        pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                        this.palette[i].setAlpha(0.8);
                    } else {
                        this.palette[i].setAlpha(1);

                    }
                    if (this.palette[i].wasClicked()) {
                        for (var v = 0; v < this.selected.length; v++) {
                            this.selected[v].fillColor = paletteColors[i];
                            wireColor = paletteColors[i];
                        }
                    }
                }
            }
            if (this.customColors.length > 0) {
                for (var i = 0; i < this.customColors.length; i++) {
                    this.customColors[i].setDepth(6);
                    if (this.customColors[i].wasClicked()) {
                        for (var v = 0; v < this.selected.length; v++) {
                            this.selected[v].fillColor = customColors[i];
                            wireColor = customColors[i];
                        }
                    }
                    if (this.customColors[i].isOver()) {
                        pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                        this.customColors[i].setAlpha(0.8);
                        if (this.del.wasPressed()) {
                            customColors.splice(i, 1);
                            this.clearPanel();
                            this.createPalette();
                        }
                    } else {
                        this.customColors[i].setAlpha(1);
                    }
                }
            }
            this.customColorBox.setDepth(6);
            this.customColorAdd.setDepth(6);
            if (this.customColorBox.isOver() || this.customColorAdd.isOver()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                this.customColorBox.setAlpha(0.8);
            } else {
                this.customColorBox.setAlpha(1);
            }
            if (this.customColorBox.wasClicked() || this.customColorAdd.wasClicked()) {
                this.clearHTML();
                document.getElementById('flex-box').style.flexDirection = 'row-reverse';
                document.getElementById('input').style.display = 'block';
                document.getElementById('input').focus();
                document.getElementById('label2').innerHTML = "Enter Hex: ";
            }

            this.inputBox();

            if (document.getElementById('input').style.display == 'block') {
                if (this.return.wasPressed()) {
                    var inputValue = document.getElementById('input').value;

                    function isHexValid() {
                        if (inputValue == "") {
                            return false;
                        }
                        if (inputValue.length != 6) {
                            return false;
                        }
                        var p = 0;
                        var re1 = /(\n|\r)+/g;
                        var re2 = /[\Wg-zG-Z]/;
                        var re3 = /v/i;

                        var s = arguments[0];
                        if (typeof s != "string") {
                            s = s.toString();
                        }

                        var opt = arguments[1];
                        if (re3.test(opt) && (s.length % 2 > 0)) {
                            return false;
                        }

                        s.replace(re1, "");

                        if (s.substr(0, 1) == "#") {
                            p = 1;
                            inputValue = inputValue.substr(1);
                        } else if (s.substr(0, 2).toLowerCase() == "0x") {
                            p = 2;
                            inputValue = inputValue.substr(2);
                        }

                        if (re2.test(s.substr(p, s.length))) {
                            return false;
                        }
                        return true;
                    }
                    if (isHexValid(inputValue) == true) {
                        if (customColors.length > 8) {
                            customColors.splice(0, 1);
                        }
                        customColors.push(parseInt(inputValue, 16));
                        this.clearPanel();
                        this.createPalette();
                        for (var v = 0; v < this.selected.length; v++) {
                            this.selected[v].fillColor = customColors[customColors.length - 1];
                            wireColor = customColors[customColors.length - 1];
                        }
                    }
                    document.getElementById('input').value = "";
                }
            }

            if (this.panelWireDeleteButton.isOver() || this.panelWireDeleteIcon.isOver() || this.panelWireDeleteText.isOver()) {
                this.panelWireDeleteButton.setAlpha(0.8);
                this.panelWireDeleteIcon.setAlpha(0.8);
                this.panelWireDeleteText.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelWireDeleteButton.setAlpha(1);
                this.panelWireDeleteIcon.setAlpha(1);
                this.panelWireDeleteText.setAlpha(1);
            }

            if (this.panelWireAddNodeButton.isOver() || this.panelWireAddNodeIcon.isOver() || this.panelWireAddNodeText.isOver()) {
                this.panelWireAddNodeButton.setAlpha(0.8);
                this.panelWireAddNodeIcon.setAlpha(0.8);
                this.panelWireAddNodeText.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelWireAddNodeButton.setAlpha(1);
                this.panelWireAddNodeIcon.setAlpha(1);
                this.panelWireAddNodeText.setAlpha(1);
            }

            if (this.panelWireDeleteButton.wasClicked() || this.panelWireDeleteIcon.wasClicked() || this.panelWireDeleteText.wasClicked() || (element == null && this.del.wasPressed())) {
                var selectWireGroup;
                for (var v = 0; v < this.nodes.length; v++) {
                    if (nodeLinks[v * 4] == lastWire || (nodeLinks[v * 4] < -1 && (nodeLinks[(v * 4) + 1] == lastWire || nodeLinks[(v * 4) + 2] == lastWire))) {
                        selectWireGroup = nodeLinks[(v * 4) + 3];
                    }
                }

                var wires = [];
                var nodes = [];
                for (var v = 0; v < this.nodes.length; v++) {
                    if (nodeLinks[v * 4] >= 0 && nodeLinks[(v * 4) + 3] == selectWireGroup) {
                        if (this.wires[nodeLinks[v * 4]].visible == 1) {
                            this.wires[nodeLinks[v * 4]].setVisible(0);
                            this.wireLines[nodeLinks[v * 4]].setVisible(0);
                            wires.push(nodeLinks[v * 4]);
                        }
                    }
                    if (nodeLinks[v * 4] < -1 && nodeLinks[(v * 4) + 3] == selectWireGroup) {
                        if (this.wires[nodeLinks[(v * 4) + 1]].visible == 1 && this.wires[nodeLinks[(v * 4) + 2].visible == 1]) {
                            this.wires[nodeLinks[(v * 4) + 1]].setVisible(0);
                            this.wires[nodeLinks[(v * 4) + 2]].setVisible(0);
                            this.wireLines[nodeLinks[(v * 4) + 1]].setVisible(0);
                            this.wireLines[nodeLinks[(v * 4) + 2]].setVisible(0);
                            wires.push(nodeLinks[(v * 4) + 1]);
                            wires.push(nodeLinks[(v * 4) + 2]);
                        }
                    }
                    if (nodeLinks[(v * 4) + 3] == selectWireGroup) {
                        if (this.nodes[v].visible == 1) {
                            this.nodes[v].setVisible(0);
                            nodes.push(v);
                        }
                    }
                }
                undo.push("deletedWire");
                undo.push(lastWire);
                undo.push(wires);
                undo.push(nodes);
                redo.splice(0, redo.length);
                this.clearPanel();
            }
            if (this.panelWireAddNodeButton.wasClicked() || this.panelWireAddNodeIcon.wasClicked() || this.panelWireAddNodeText.wasClicked() || this.w.wasPressed()) {
                var node = this.add.circle((this.wireLines[lastWire].geom.x1 + this.wireLines[lastWire].geom.x2) / 2, (this.wireLines[lastWire].geom.y1 + this.wireLines[lastWire].geom.y2) / 2, 8 * scaleCount, 0xffffff);
                var node2 = this.add.circle((this.wireLines[lastWire].geom.x1 + this.wireLines[lastWire].geom.x2) / 2, (this.wireLines[lastWire].geom.y1 + this.wireLines[lastWire].geom.y2) / 2, 8 * scaleCount, this.wires[lastWire].fillColor);
                this.nodes.push(node);
                node2.enableClick();
                node2.enableDrag();
                this.nodes.push(node2);

                var selectWireGroup;
                for (var v = 0; v < this.nodes.length; v++) {
                    if (nodeLinks[v * 4] == lastWire || ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] == -3 || nodeLinks[v * 4] <= -4) && nodeLinks[(v * 4) + 2] == lastWire)) {
                        selectWireGroup = nodeLinks[(v * 4) + 3]
                    }
                }
                nodeLinks.push(-3);
                nodeLinks.push(lastWire);
                nodeLinks.push(this.wireLines.length);
                nodeLinks.push(selectWireGroup)
                nodeLinks.push(-2);
                nodeLinks.push(lastWire);
                nodeLinks.push(this.wireLines.length + 1);
                nodeLinks.push(selectWireGroup);
                var obj = this.add.line(this.wireLines[lastWire].geom.x1, this.wireLines[lastWire].geom.y1, node.x, node.y, 0xffffff);
                obj.setLineWidth(3.8 * scaleCount);
                var obj2 = this.add.line(this.wireLines[lastWire].geom.x2, this.wireLines[lastWire].geom.y2, node.x, node.y, 0xffffff);
                obj2.setLineWidth(3.8 * scaleCount);
                this.wireLines[lastWire].setVisible(0);
                this.wires[lastWire].setVisible(0);
                this.wireLines.push(obj);
                this.wireLines.push(obj2);
                var obj3 = this.add.rectangle((obj.geom.x1 + obj.geom.x2) / 2, (obj.geom.y1 + obj.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj.geom.x1 - obj.geom.x2), 2) + Math.pow(Math.abs(obj.geom.y1 - obj.geom.y2), 2))), this.wires[lastWire].fillColor);
                obj3.setAngle(-(Math.atan(Math.abs(obj.geom.x1 - obj.geom.x2) / Math.abs(obj.geom.y1 - obj.geom.y2))) * (180 / Math.PI));
                var obj4 = this.add.rectangle((obj2.geom.x1 + obj2.geom.x2) / 2, (obj2.geom.y1 + obj2.geom.y2) / 2, lineWidth, (Math.sqrt(Math.pow(Math.abs(obj2.geom.x1 - obj2.geom.x2), 2) + Math.pow(Math.abs(obj2.geom.y1 - obj2.geom.y2), 2))), this.wires[lastWire].fillColor);
                obj4.setAngle(-(Math.atan(Math.abs(obj2.geom.x1 - obj2.geom.x2) / Math.abs(obj2.geom.y1 - obj2.geom.y2))) * (180 / Math.PI));
                obj3.enableClick();
                obj4.enableClick();
                this.wires.push(obj3);
                this.wires.push(obj4);

                undo.push("subdividedWire");
                undo.push(this.nodes.length - 2);
                undo.push(nodeLinks.length - 8);
                undo.push(nodeLinks.length - 4);
                redo.splice(0, redo.length);
                this.clearPanel();
            }
            this.wireColorShortKeys(lastWire);
        }
        if (panelType >= 2) {
            if (this.panelDuplicateButton.isOver() || this.panelDuplicate.isOver()) {
                this.panelDuplicateButton.setAlpha(0.8);
                this.panelDuplicate.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelDuplicateButton.setAlpha(1);
                this.panelDuplicate.setAlpha(1);
            }
            if (this.panelDeleteButton.isOver() || this.panelDelete.isOver()) {
                this.panelDeleteButton.setAlpha(0.8);
                this.panelDelete.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelDuplicateButton.setAlpha(1);
                this.panelDelete.setAlpha(1);
            }
            if (this.panelEditButton.isOver() || this.panelEditIcon.isOver() || this.panelEditText.isOver()) {
                this.panelEditButton.setAlpha(0.8);
                this.panelEditIcon.setAlpha(0.8);
                this.panelEditText.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelEditButton.setAlpha(1);
                this.panelEditIcon.setAlpha(1);
                this.panelEditText.setAlpha(1);
            }

            if (this.panelUpArrow.isOver()) {
                this.panelUpArrow.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelUpArrow.setAlpha(1);
            }
            if (this.panelLeftArrow.isOver()) {
                this.panelLeftArrow.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelLeftArrow.setAlpha(1);
            }
            if (this.panelRightArrow.isOver()) {
                this.panelRightArrow.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelRightArrow.setAlpha(1);
            }
            if (this.panelDownArrow.isOver()) {
                this.panelDownArrow.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelDownArrow.setAlpha(1);
            }
            if (this.panelRotateLeft.isOver()) {
                this.panelRotateLeft.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelRotateLeft.setAlpha(1);
            }
            if (this.panelRotateRight.isOver()) {
                this.panelRotateRight.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelRotateRight.setAlpha(1);
            }

            if (this.panelBackward.isOver()) {
                this.panelBackward.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelBackward.setAlpha(1);
            }
            if (this.panelForward.isOver()) {
                this.panelForward.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelForward.setAlpha(1);
            }

            if (this.panelDuplicateButton.wasClicked() || this.panelDuplicate.wasClicked()) {
                var obj = this.add.sprite(this.objects[lastClicked].x, this.objects[lastClicked].y, `${this.objectIDs[lastClicked]}`);
                for (var v = 0; v < this.objects.length; v++) {
                    if (this.objectIDs[v] == this.objectIDs[lastClicked] && this.objects[v].x == obj.x && this.objects[v].y == obj.y) {
                        obj.x += deviceWidth * 0.01;
                        obj.y += deviceHeight * 0.02;
                    }
                }
                obj.scale *= (objectsData[this.objectIDs[lastClicked] * 5 + 2]);
                obj.width *= (objectsData[this.objectIDs[lastClicked] * 5 + 2]);
                obj.height *= (objectsData[this.objectIDs[lastClicked] * 5 + 2]);

                obj.scale *= scaleCount;
                obj.width *= scaleCount;
                obj.height *= scaleCount;

                obj.setAngle(rotateAngle[lastClicked] * 90);

                if (settings[(lastClicked * 2)] != -1 || settings[(lastClicked * 2) + 1] != -1) {
                    if (this.objectIDs[lastClicked] == 2) {
                        //SETUP RESISTOR
                    }
                    if (this.objectIDs[lastClicked] == 3 || this.objectIDs[lastClicked] == 6) {
                        obj.setTint(settings[lastClicked * 2]);
                    }
                }

                obj.enableDrag();
                obj.enableClick();
                obj.setDepth(3);

                for (var v = 0; v < this.objects.length; v++) {
                    this.objects[v].depth -= 0.01;
                }
                this.objects.push(obj);
                this.objectIDs.push(this.objectIDs[lastClicked]);
                var label = this.add.text(this.objects[this.objects.length - 1].x + scaleCount * deviceWidth * defaultLabel[(this.objectIDs[lastClicked] * 12) + 4], this.objects[this.objects.length - 1].y + scaleCount * deviceHeight * defaultLabel[(this.objectIDs[lastClicked] * 12) + 5], this.objectLabels[lastClicked].text, 0x000000);
                label.setOrigin(0.5, 0.5);
                label.setFontSize(scaleCount * deviceHeight * defaultLabel[(this.objectIDs[lastClicked] * 12) + 1]);
                this.objectLabels.push(label);
                rotateAngle.push(rotateAngle[lastClicked]);
                shiftObjects.push(false);
                settings.push(settings[lastClicked * 2]);
                settings.push(settings[(lastClicked * 2) + 1]);

                lastClicked = this.objects.length - 1
                this.clearPanel();
                this.openPanel(this.objects.length - 1);
            }
            if (this.panelDeleteButton.wasClicked() || this.panelDelete.wasClicked()) {
                this.initiateDelete(lastClicked)
            }

            if (this.panelUpArrow.isClicked()) {
                this.objects[lastClicked].y -= 0.5;
            }
            if (this.panelLeftArrow.isClicked()) {
                this.objects[lastClicked].x -= 0.5;
            }
            if (this.panelRightArrow.isClicked()) {
                this.objects[lastClicked].x += 0.5;
            }
            if (this.panelDownArrow.isClicked()) {
                this.objects[lastClicked].y += 0.5;
            }

            if (this.panelRotateRight.wasClicked()) {
                this.objects[lastClicked].angle += 90;
                rotateAngle[lastClicked]++;
                if (rotateAngle[lastClicked] == 4) {
                    rotateAngle[lastClicked] = 0;
                }
                var widthHolder = this.objects[i].width;
                this.objects[lastClicked].width = this.objects[lastClicked].height;
                this.objects[lastClicked].height = widthHolder;
            }
            if (this.panelRotateLeft.wasClicked()) {
                this.objects[lastClicked].angle -= 90;
                rotateAngle[lastClicked]--;
                if (rotateAngle[lastClicked] == -1) {
                    rotateAngle[lastClicked] = 3;
                }
                var widthHolder = this.objects[lastClicked].width;
                this.objects[lastClicked].width = this.objects[lastClicked].height;
                this.objects[lastClicked].height = widthHolder;
            }

            if (this.panelBackward.wasClicked()) {
                for (var v = 0; v < this.objects.length; v++) {
                    if (this.objects[lastClicked].intersects(this.objects[v]) && v != lastClicked) {
                        this.objects[lastClicked].setDepth(2);
                        this.objects[v].depth += 0.01;
                    }
                }
            }
            if (this.panelForward.wasClicked()) {
                for (var v = 0; v < this.objects.length; v++) {
                    if (this.objects[lastClicked].intersects(this.objects[v]) && v != lastClicked) {
                        this.objects[lastClicked].setDepth(3);
                        this.objects[v].depth -= 0.01;
                    }
                }
            }
        }
        if (panelType == 4) {
            this.panelResistanceValueBox.setDepth(6);
            this.panelResistanceValue.setDepth(6);
            this.panelResistanceUnitBox.setDepth(6);
            this.panelResistanceUnit.setDepth(6);

            if (this.panelResistanceValueBox.isOver() || this.panelResistanceValue.isOver()) {
                this.panelResistanceValueBox.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelResistanceValueBox.setAlpha(1);
            }
            if (this.panelResistanceUnitBox.isOver() || this.panelResistanceUnit.isOver()) {
                this.panelResistanceUnitBox.setAlpha(0.8);
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            } else {
                this.panelResistanceUnitBox.setAlpha(1);
            }
            if (this.panelResistanceValueBox.wasClicked() || this.panelResistanceValue.wasClicked()) {
                this.clearHTML();
                document.getElementById('flex-box').style.flexDirection = 'row-reverse';
                document.getElementById('inputnum').style.display = 'block';
                document.getElementById('inputnum').focus();
                document.getElementById('label2').innerHTML = "Enter Resistance Value: ";
            }
            if (this.panelResistanceUnitBox.wasClicked() || this.panelResistanceUnit.wasClicked()) {
                this.clearHTML();
                document.getElementById('flex-box').style.flexDirection = 'row-reverse';
                document.getElementById('label3').innerHTML = "Choose Ohm Unit: "
                document.getElementById('dropdown').style.display = 'block';
                document.getElementById('dropdown').focus();
                document.getElementById('option1').style.display = "block"
                document.getElementById('option2').value = "";
                document.getElementById('option2').innerHTML = "";
                document.getElementById('option2').style.display = "block";
                document.getElementById('option3').value = "K";
                document.getElementById('option3').innerHTML = "K";
                document.getElementById('option3').style.display = "block";
                document.getElementById('option4').value = "M";
                document.getElementById('option4').innerHTML = "M";
                document.getElementById('option4').style.display = "block";
                document.getElementById('option5').style.display = 'none';
            }

            this.inputBox();

            if (document.getElementById('inputnum').style.display == 'block') {
                if (this.return.wasPressed()) {
                    this.panelResistanceValue.setText(document.getElementById('inputnum').value);
                    if (document.getElementById('inputnum').value.length > 5) {
                        this.panelResistanceValue.setFontSize(5 / (document.getElementById('inputnum').value.length) * deviceHeight * 0.04);
                    } else {
                        this.panelResistanceValue.setFontSize(deviceHeight * 0.04);
                    }
                    settings[lastClicked * 2] = document.getElementById('inputnum').value;
                    this.clearHTML();
                }
            }
            if (document.getElementById('dropdown').value == "" || document.getElementById('dropdown').value == "K" || document.getElementById('dropdown').value == "M") {
                this.panelResistanceUnit.setText(document.getElementById('dropdown').value);
                settings[(lastClicked * 2) + 1] = document.getElementById('dropdown').value;
                this.clearHTML();
            }
        }
        if (panelType == 5 || panelType == 8) {
            for (var i = 0; i < this.objectColors.length; i++) {
                this.objectColors[i].setDepth(6);
                if (this.objectColors[i].isOver()) {
                    pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                    this.objectColors[i].setAlpha(0.8);
                } else {
                    this.objectColors[i].setAlpha(1);
                }
                if (this.objectColors[i].wasClicked()) {
                    this.objects[lastClicked].setTint(objectColors[i]);
                    settings[lastClicked * 2] = objectColors[i];
                }
            }
            if (this.customObjectColors.length > 0) {
                for (var i = 0; i < this.customObjectColors.length; i++) {
                    this.customObjectColors[i].setDepth(6);
                    if (this.customObjectColors[i].wasClicked()) {
                        this.objects[lastClicked].setTint(customObjectColors[i]);
                        settings[lastClicked * 2] = customObjectColors[i];
                    }
                    if (this.customObjectColors[i].isOver()) {
                        pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                        this.customObjectColors[i].setAlpha(0.8);
                        if (this.del.wasPressed()) {
                            customObjectColors.splice(i, 1);
                            this.clearPanel();
                            this.openPanel(lastClicked);
                        }
                    } else {
                        this.customObjectColors[i].setAlpha(1);
                    }
                }
            }
            this.customObjectColorBox.setDepth(6);
            this.customObjectColorAdd.setDepth(6);
            if (this.customObjectColorBox.isOver() || this.customObjectColorAdd.isOver()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                this.customObjectColorBox.setAlpha(0.8);
            } else {
                this.customObjectColorBox.setAlpha(1);
            }
            if (this.customObjectColorBox.wasClicked() || this.customObjectColorAdd.wasClicked()) {
                document.getElementById('flex-box').style.flexDirection = 'row-reverse';
                document.getElementById('input').value = "";
                document.getElementById('input').style.display = 'block';
                document.getElementById('input').focus();
                document.getElementById('label2').innerHTML = "Enter Hex: ";
            }

            this.inputBox();

            if (document.getElementById('input').style.display == 'block' && document.getElementById('label2').innerHTML == "Enter Hex: ") {
                if (this.return.wasPressed()) {
                    var inputValue = document.getElementById('input').value;

                    function isHexValid() {
                        if (inputValue == "") {
                            return false;
                        }
                        if (inputValue.length != 6) {
                            return false;
                        }
                        var p = 0;
                        var re1 = /(\n|\r)+/g;
                        var re2 = /[\Wg-zG-Z]/;
                        var re3 = /v/i;

                        var s = arguments[0];
                        if (typeof s != "string") {
                            s = s.toString();
                        }

                        var opt = arguments[1];
                        if (re3.test(opt) && (s.length % 2 > 0)) {
                            return false;
                        }

                        s.replace(re1, "");

                        if (s.substr(0, 1) == "#") {
                            p = 1;
                            inputValue = inputValue.substr(1);
                        } else if (s.substr(0, 2).toLowerCase() == "0x") {
                            p = 2;
                            inputValue = inputValue.substr(2);
                        }

                        if (re2.test(s.substr(p, s.length))) {
                            return false;
                        }
                        return true;
                    }
                    if (isHexValid(inputValue) == true) {
                        if (customObjectColors.length > 3) {
                            customObjectColors.splice(0, 1);
                        }
                        customObjectColors.push(parseInt(inputValue, 16));
                        this.clearPanel();
                        this.openPanel(lastClicked);
                        this.objects[lastClicked].setTint(customObjectColors[customObjectColors.length - 1]);
                        settings[lastClicked * 2] = customObjectColors[customObjectColors.length - 1];
                    }
                    this.clearHTML();
                }
            }
        }
        if (panelType == 7 || panelType == 8 || panelType == 10) {
            this.panelObjectLabelBox.setDepth(6);
            this.panelObjectLabel.setDepth(6);

            this.inputBox();

            if (this.panelObjectLabelBox.isOver() || this.panelObjectLabel.isOver()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                this.panelObjectLabelBox.setAlpha(0.8);
            } else {
                this.panelObjectLabelBox.setAlpha(1);
            }
            if (this.panelObjectLabelBox.wasClicked() || this.panelObjectLabel.wasClicked()) {
                document.getElementById('flex-box').style.flexDirection = 'row-reverse';
                document.getElementById('input').style.display = 'block';
                document.getElementById('input').value = "";
                document.getElementById('input').focus();
                document.getElementById('label2').innerHTML = "Enter Label: "
            }
            if (document.getElementById('input').style.display == 'block') {
                if (this.return.wasPressed()) {
                    this.panelObjectLabel.setText(document.getElementById('input').value);
                    this.objectLabels[lastClicked].setText(document.getElementById('input').value);
                    if (document.getElementById('input').value.length > 9) {
                        this.panelObjectLabel.setFontSize(9 / (document.getElementById('input').value.length) * deviceHeight * 0.04);
                    } else {
                        this.panelObjectLabel.setFontSize(deviceHeight * 0.04);
                    }
                    settings[(lastClicked * 2) + 1] = document.getElementById('input').value;
                    this.clearHTML();
                }
            }
        }

        for (var i = 0; i < this.itemLabels.length; i++) {
            if (this.items[i].x < deviceWidth * 0.22) {
                this.items[i].setDepth(6);
                this.itemLabels[i].setDepth(6);
            }
        }

        if (this.magnet.wasClicked() || this.slash.wasClicked()) {
            if (this.slash.visible == 0) {
                this.slash.setVisible(1);
            } else {
                this.slash.setVisible(0);
            }
        }

        if (this.itemTypeArrow.wasClicked() || this.itemTypeButton.wasClicked()) {
            currentPage = 0;
            currentItemType++;
            if (currentItemType == 5) {
                currentItemType = 0;
            }
            itemObjectID.splice(0, itemObjectID.length);
            for (var i = 0; i < this.items.length; i++) {
                this.items[i].destroy();
                this.itemLabels[i].destroy();
            }
            clean(this.items);
            clean(this.itemLabels);
            this.binLabel.setText(itemTypes[currentItemType]);

            if (currentItemType == 0) {
                this.addItem.setVisible(1);
            } else {
                this.addItem.setVisible(0);
            }

            if (currentItemType == 1) {
                this.binLabel.setFontSize(deviceHeight * 0.035);
                this.binLabel.setY(deviceHeight * 0.035);
            } else {
                this.binLabel.setFontSize(deviceHeight * 0.045)
                this.binLabel.setY(deviceHeight * 0.03);
            }

            objectID = 0;
            var v = 0;
            for (var i = 0; i < objectsData.length / 5; i++) {
                if (v < 8) {
                    var obj;
                    var label;
                    if (currentItemType == 0 || objectsData[(i * 5) + 1] == itemTypes[currentItemType]) {
                        if (v % 2 == 0) {
                            obj = this.add.sprite(deviceWidth * 0.05, (Math.floor(v / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                            label = this.add.text(deviceWidth * 0.05, (Math.floor(v / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                        }
                        if (v % 2 == 1) {
                            obj = this.add.sprite(deviceWidth * 0.15, (Math.floor(v / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                            label = this.add.text(deviceWidth * 0.15, (Math.floor(v / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                        }
                        obj.scale *= (objectsData[(i * 5) + 2]);
                        obj.width *= (objectsData[(i * 5) + 2]);
                        obj.height *= (objectsData[(i * 5) + 2]);
                        obj.width *= 10;
                        obj.height *= 10;
                        while (obj.width < deviceWidth * 0.5 && obj.height < deviceHeight * 0.6) {
                            obj.width *= 1.1;
                            obj.scale *= 1.1;
                            obj.height *= 1.1;
                        }
                        while (obj.width > deviceWidth * 0.6 || obj.height > deviceHeight) {
                            obj.width *= 0.9;
                            obj.scale *= 0.9;
                            obj.height *= 0.9;
                        }
                        obj.enableClick();
                        this.items[v] = obj;
                        itemObjectID.push(objectID);
                        label.setOrigin(0.5, 0);
                        this.itemLabels[v] = label;
                        v++;
                    }
                    objectID++;
                }
            }

        }

        if (this.lastPageArrow.wasClicked() || this.lastPageButton.wasClicked()) {
            if (currentPage > 0) {
                currentPage--;
                itemObjectID.splice(0, itemObjectID.length);
                for (var i = 0; i < this.items.length; i++) {
                    this.items[i].destroy();
                    this.itemLabels[i].destroy();
                }
                clean(this.items);
                clean(this.itemLabels);

                objectID = 0;
                var v = 0;
                var t = 0;
                for (var i = 0; i < objectsData.length / 5; i++) {
                    if (t < 8) {
                        var obj;
                        var label;
                        if (currentItemType == 0 || objectsData[(i * 5) + 1] == itemTypes[currentItemType]) {
                            if (v >= currentPage * 2) {
                                if (v % 2 == 0) {
                                    obj = this.add.sprite(deviceWidth * 0.05, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                                    label = this.add.text(deviceWidth * 0.05, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                                }
                                if (v % 2 == 1) {
                                    obj = this.add.sprite(deviceWidth * 0.15, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                                    label = this.add.text(deviceWidth * 0.15, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                                }
                                obj.scale *= (objectsData[(i * 5) + 2]);
                                obj.width *= (objectsData[(i * 5) + 2]);
                                obj.height *= (objectsData[(i * 5) + 2]);
                                obj.width *= 10;
                                obj.height *= 10;
                                while (obj.width < deviceWidth * 0.5 && obj.height < deviceHeight * 0.6) {
                                    obj.width *= 1.1;
                                    obj.scale *= 1.1;
                                    obj.height *= 1.1;
                                }
                                while (obj.width > deviceWidth * 0.6 || obj.height > deviceHeight) {
                                    obj.width *= 0.9;
                                    obj.scale *= 0.9;
                                    obj.height *= 0.9;
                                }
                                obj.enableClick();
                                this.items[v - currentPage * 2] = obj;
                                itemObjectID.push(objectID);
                                label.setOrigin(0.5, 0);
                                this.itemLabels[v - currentPage * 2] = label;
                                t++;
                            }
                            v++;
                        }
                        objectID++;
                    }
                }
            }
        }

        if (this.nextPageArrow.wasClicked() || this.nextPageButton.wasClicked()) {
            currentPage++;
            itemObjectID.splice(0, itemObjectID.length);
            for (var i = 0; i < this.items.length; i++) {
                this.items[i].destroy();
                this.itemLabels[i].destroy();
            }
            clean(this.items);
            clean(this.itemLabels);

            objectID = 0;
            var v = 0;
            var t = 0;
            for (var i = 0; i < objectsData.length / 5; i++) {
                if (t < 8) {
                    var obj;
                    var label;
                    if (currentItemType == 0 || objectsData[(i * 5) + 1] == itemTypes[currentItemType]) {
                        if (v >= currentPage * 2) {
                            if (v % 2 == 0) {
                                obj = this.add.sprite(deviceWidth * 0.05, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                                label = this.add.text(deviceWidth * 0.05, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                            }
                            if (v % 2 == 1) {
                                obj = this.add.sprite(deviceWidth * 0.15, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.17, `${objectID}`);
                                label = this.add.text(deviceWidth * 0.15, (Math.floor((v - currentPage * 2) / 2) * deviceHeight * 0.2) + deviceHeight * 0.25, objectsData[i * 5], 0x000000);
                            }
                            obj.scale *= (objectsData[(i * 5) + 2]);
                            obj.width *= (objectsData[(i * 5) + 2]);
                            obj.height *= (objectsData[(i * 5) + 2]);
                            obj.width *= 10;
                            obj.height *= 10;
                            while (obj.width < deviceWidth * 0.5 && obj.height < deviceHeight * 0.6) {
                                obj.width *= 1.1;
                                obj.scale *= 1.1;
                                obj.height *= 1.1;
                            }
                            while (obj.width > deviceWidth * 0.6 || obj.height > deviceHeight) {
                                obj.width *= 0.9;
                                obj.scale *= 0.9;
                                obj.height *= 0.9;
                            }
                            obj.enableClick();
                            this.items[v - currentPage * 2] = obj;
                            itemObjectID.push(objectID);
                            label.setOrigin(0.5, 0);
                            this.itemLabels[v - currentPage * 2] = label;
                            t++;
                        }
                        v++;
                    }
                    objectID++;
                }
            }

        }

        if (wireClick == 1) {
            clickTime++;
            if (clickTime > 20) {
                wireClick = 0;
                clickTime = 0;
            }
        }

        for (var i = 0; i < this.objectLabels.length; i++) {
            this.objectLabels[i].setDepth(3.2);
            if (defaultLabel[(this.objectIDs[i] * 12) + 3] == true) {
                this.objectLabels[i].setAngle(rotateAngle[i] * 90);
            }
            this.objectLabels[i].x = this.objects[i].x + (scaleCount * deviceWidth * defaultLabel[(this.objectIDs[i] * 12) + 4 + (rotateAngle[i] * 2)]);
            this.objectLabels[i].y = this.objects[i].y + (scaleCount * deviceHeight * defaultLabel[(this.objectIDs[i] * 12) + 5 + (rotateAngle[i] * 2)]);
            if (this.objectLabels[i].text.length < defaultLabel[(this.objectIDs[i] * 12) + 2]) {
                this.objectLabels[i].setFontSize(scaleCount * deviceHeight * defaultLabel[(this.objectIDs[i] * 12) + 1]);
            } else {
                this.objectLabels[i].setFontSize(scaleCount * defaultLabel[(this.objectIDs[i] * 12) + 2] / (this.objectLabels[i].text.length) * deviceHeight * defaultLabel[(this.objectIDs[i] * 12) + 1]);
            }
        }

        var wiringPointer = false;
        for (var i = 0; i < this.objects.length; i++) {
            startingX[i] = this.objects[i].x;
            startingY[i] = this.objects[i].y;
            if (this.objects[i].wasClicked()) {
                lastPosition[0] = -i - 1;
                lastPosition[1] = this.objects[i].x;
                lastPosition[2] = this.objects[i].y;
                lastClicked = i;

                this.clearPanel();
                this.openPanel(i);
                lastX = this.input.mousePointer.x;
                lastY = this.input.mousePointer.y;

                if (this.shift.isPressed()) {
                    for (var v = 0; v < this.objects.length; v++) {
                        this.objects[v].disableDrag();
                    }
                    if (shiftObjects[i] == false) {
                        this.shiftSelect.push(this.objects[i]);
                        shiftObjects[i] = true;
                    }
                }
            }
            if (lastPosition[0] == -i - 1 && !(this.objects[i].isClicked()) && (lastPosition[1] != this.objects[i].x || lastPosition[2] != this.objects[i].y)) {
                undo.push("movedObject");
                undo.push(-i - 1);
                undo.push(lastPosition[1] - this.objects[i].x);
                undo.push(lastPosition[2] - this.objects[i].y);
                lastPosition[1] = this.objects[i].x;
                lastPosition[2] = this.objects[i].y;
                redo.splice(0, redo.length);
            }
            if (this.input.activePointer.isDown == false) {
                lastX = -1;
                lastY = -1;
            }
            if (this.shiftSelect.length > 0 && this.input.activePointer.isDown == true && lastX != -1 && lastY != -1) {
                if (this.input.mousePointer.x != lastX || this.input.mousePointer.y != lastY) {
                    moved = i;
                    this.objects[i].x += this.input.mousePointer.x - lastX;
                    this.objects[i].y += this.input.mousePointer.y - lastY;
                    lastX = this.input.mousePointer.x;
                    lastY = this.input.mousePointer.y;
                }
            }
            if (!(this.shift.isPressed())) {
                this.objects[i].setAlpha(1);
                if (this.popup.visible == 0) {
                    for (var v = 0; v < this.objects.length; v++) {
                        this.objects[v].enableDrag();
                    }
                }
                for (var v = 0; v < this.shiftSelect.length; v++) {
                    this.shiftSelect[v] = -1;
                }
                for (var v = 0; v < shiftObjects.length; v++) {
                    shiftObjects[v] = false;
                }
                this.shiftSelect.splice(0, this.shiftSelect.length);
            }
            if (this.objects[i].isClicked()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
            }

            var noOther = true;
            for (var v = 0; v < this.nodes.length; v++) {
                if (nodeLinks[v * 4] == -2) {
                    if (this.nodes[v].isClicked()) {
                        noOther = false;
                    }
                }
            }
            if (this.objects[i].isOver() && noOther == true) {
                this.objects[i].setAlpha(0.7);
                if (element == null) {
                    if (this.del.wasPressed()) {
                        this.initiateDelete(i);
                    }
                    if (this.d.wasPressed()) {
                        var obj = this.add.sprite(this.objects[i].x, this.objects[i].y, `${this.objectIDs[i]}`);
                        for (var v = 0; v < this.objects.length; v++) {
                            if (this.objectIDs[v] == this.objectIDs[i] && this.objects[v].x == obj.x && this.objects[v].y == obj.y) {
                                obj.x += deviceWidth * 0.01;
                                obj.y += deviceHeight * 0.02;
                            }
                        }
                        obj.scale *= (objectsData[this.objectIDs[i] * 5 + 2]);
                        obj.width *= (objectsData[this.objectIDs[i] * 5 + 2]);
                        obj.height *= (objectsData[this.objectIDs[i] * 5 + 2]);

                        obj.scale *= scaleCount;
                        obj.width *= scaleCount;
                        obj.height *= scaleCount;

                        obj.setAngle(rotateAngle[i] * 90);

                        if (settings[(lastClicked * 2)] != -1 || settings[(lastClicked * 2) + 1] != -1) {
                            if (this.objectIDs[lastClicked] == 2) {
                                //SETUP RESISTOR
                            }
                            if (this.objectIDs[lastClicked] == 3 || this.objectIDs[lastClicked] == 6) {
                                obj.setTint(settings[lastClicked * 2]);
                            }
                        }

                        obj.enableDrag();
                        obj.enableClick();
                        obj.setDepth(3);
                        for (var v = 0; v < this.objects.length; v++) {
                            this.objects[v].depth -= 0.01;
                        }
                        this.objects.push(obj);
                        this.objectIDs.push(this.objectIDs[i]);
                        var label = this.add.text(this.objects[this.objects.length - 1].x + scaleCount * deviceWidth * defaultLabel[(this.objectIDs[i] * 12) + 4], this.objects[this.objects.length - 1].y + scaleCount * deviceHeight * defaultLabel[(this.objectIDs[i] * 12) + 5], this.objectLabels[i].text, 0x000000);
                        label.setOrigin(0.5, 0.5);
                        label.setFontSize(scaleCount * deviceHeight * defaultLabel[(this.objectIDs[i] * 12) + 1]);
                        this.objectLabels.push(label);
                        rotateAngle.push(rotateAngle[i]);
                        shiftObjects.push(false);
                        settings.push(settings[i * 2]);
                        settings.push(settings[(i * 2) + 1]);

                        lastClicked = this.objects.length - 1
                        this.clearPanel();
                        this.openPanel(this.objects.length - 1);
                    }
                    if (!(this.shift.isPressed())) {
                        if (this.rightarrow.isPressed()) {
                            this.objects[i].x += 0.5;
                        }
                        if (this.leftarrow.isPressed()) {
                            this.objects[i].x -= 0.5;
                        }
                        if (this.uparrow.isPressed()) {
                            this.objects[i].y -= 0.5;
                        }
                        if (this.downarrow.isPressed()) {
                            this.objects[i].y += 0.5;
                        }
                    } else {
                        if (this.rightarrow.wasPressed()) {
                            this.objects[i].angle += 90;
                            rotateAngle[i]++;
                            if (rotateAngle[i] == 4) {
                                rotateAngle[i] = 0;
                            }
                            var widthHolder = this.objects[i].width;
                            this.objects[i].width = this.objects[i].height;
                            this.objects[i].height = widthHolder;
                        }
                        if (this.leftarrow.wasPressed()) {
                            this.objects[i].angle -= 90;
                            rotateAngle[i]--;
                            if (rotateAngle[i] == -1) {
                                rotateAngle[i] = 3;
                            }
                            var widthHolder = this.objects[i].width;
                            this.objects[i].width = this.objects[i].height;
                            this.objects[i].height = widthHolder;

                        }
                        if (this.downarrow.wasPressed() && this.objects[i].depth != 2) {
                            for (var v = 0; v < this.objects.length; v++) {
                                if (this.objects[i].intersects(this.objects[v]) && v != i) {
                                    this.objects[i].setDepth(2);
                                    this.objects[v].depth += 0.01;
                                }
                            }
                        }
                        if (this.uparrow.wasPressed() && this.objects[i].depth != 3) {
                            for (var v = 0; v < this.objects.length; v++) {
                                if (this.objects[i].intersects(this.objects[v]) && v != i) {
                                    this.objects[i].setDepth(3);
                                    this.objects[v].depth -= 0.01;
                                }
                            }
                        }
                    }
                }
            } else {
                if (shiftObjects[i] == false) {
                    this.objects[i].setAlpha(1);
                }
            }

            for (var v = 0; v < this.nodes.length; v++) {
                for (var t = 0; t < this.nodes.length; t++) {
                    if (this.nodes[v].x == this.nodes[t].x && this.nodes[v].y == this.nodes[t].y && v != t && nodeLinks[v * 4] != -1 && nodeLinks[(t * 4)] != -1 && nodeLinks[(v * 4) + 3] == nodeLinks[(t * 4) + 3]) {
                        if ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] <= -4) && nodeLinks[(t * 4)] != -3 && nodeLinks[(t * 4)] > -4) {
                            this.nodes[v].disableClick();
                            this.nodes[v].disableDrag();
                            this.nodes[v].setVisible(0);
                            this.nodes[v - 1].setVisible(0);
                            nodeLinks[v * 4] = t - t - t - 4;
                        }
                    }
                }
                if (nodeLinks[v * 4] >= 0) {
                    if (nodeLinks[(v * 4) + 1] == i) {
                        this.nodes[v].setX(this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][nodeLinks[(v * 4) + 2] + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width));
                        this.nodes[v].setY(this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][nodeLinks[(v * 4) + 2] + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height));
                    }
                }
                if (nodeLinks[v * 4] == -3) {
                    this.nodes[v].setX(this.nodes[v + 1].x);
                    this.nodes[v].setY(this.nodes[v + 1].y);
                }
                if (nodeLinks[v * 4] <= -4) {
                    this.nodes[v].setX(this.nodes[0 - (nodeLinks[v * 4] + 4)].x);
                    this.nodes[v].setY(this.nodes[0 - (nodeLinks[v * 4] + 4)].y);
                }
            }

            for (var v = 0; v < this.nodes.length; v++) {
                if (nodeLinks[v * 8] >= 0) {
                    if (nodeLinks[(v * 8) + 1] == i) {
                        this.wireLines[nodeLinks[v * 8]].setTo(this.nodes[v * 2].x, this.nodes[v * 2].y, this.wireLines[nodeLinks[v * 8]].geom.x2, this.wireLines[nodeLinks[v * 8]].geom.y2);
                    }
                }
                if (nodeLinks[(v * 8) + 4] >= 0) {
                    if (nodeLinks[(v * 8) + 5] == i) {
                        this.wireLines[nodeLinks[(v * 8) + 4]].setTo(this.wireLines[nodeLinks[(v * 8) + 4]].geom.x1, this.wireLines[nodeLinks[(v * 8) + 4]].geom.y1, this.nodes[(v * 2) + 1].x, this.nodes[(v * 2) + 1].y);
                    }
                }
                if (nodeLinks[v * 4] == -3) {
                    this.wireLines[nodeLinks[(v * 4) + 2]].setTo(this.wireLines[nodeLinks[(v * 4) + 1]].geom.x1, this.wireLines[nodeLinks[(v * 4) + 1]].geom.y1, this.nodes[v].x, this.nodes[v].y);
                }
                if (nodeLinks[v * 4] == -2 || nodeLinks[v * 4] <= -4) {
                    this.wireLines[nodeLinks[(v * 4) + 2]].setTo(this.nodes[v].x, this.nodes[v].y, this.wireLines[nodeLinks[(v * 4) + 1]].geom.x2, this.wireLines[nodeLinks[(v * 4) + 1]].geom.y2);
                }

            }
            for (var v = 0; v < this.wires.length; v++) {
                this.wires[v].x = (this.wireLines[v].geom.x1 + this.wireLines[v].geom.x2) / 2;
                this.wires[v].y = (this.wireLines[v].geom.y1 + this.wireLines[v].geom.y2) / 2;
                this.wires[v].height = Math.sqrt(Math.pow(Math.abs(this.wireLines[v].geom.x1 - this.wireLines[v].geom.x2), 2) + Math.pow(Math.abs(this.wireLines[v].geom.y1 - this.wireLines[v].geom.y2), 2));

                if ((this.wireLines[v].geom.x1 < this.wireLines[v].geom.x2 && this.wireLines[v].geom.y1 < this.wireLines[v].geom.y2) || (this.wireLines[v].geom.x1 > this.wireLines[v].geom.x2 && this.wireLines[v].geom.y1 > this.wireLines[v].geom.y2)) {
                    this.wires[v].setAngle((-Math.atan(Math.abs(this.wireLines[v].geom.x1 - this.wireLines[v].geom.x2) / Math.abs(this.wireLines[v].geom.y1 - this.wireLines[v].geom.y2))) * (180 / Math.PI));
                }
                if ((this.wireLines[v].geom.x1 > this.wireLines[v].geom.x2) && (this.wireLines[v].geom.y1 < this.wireLines[v].geom.y2) || (this.wireLines[v].geom.x1 < this.wireLines[v].geom.x2 && this.wireLines[v].geom.y1 > this.wireLines[v].geom.y2)) {
                    this.wires[v].setAngle((Math.atan(Math.abs(this.wireLines[v].geom.x1 - this.wireLines[v].geom.x2) / Math.abs(this.wireLines[v].geom.y1 - this.wireLines[v].geom.y2))) * (180 / Math.PI));
                }
                if (this.wireLines[v].geom.y1 == this.wireLines[v].geom.y2) {
                    this.wires[v].setAngle(90);
                }
                if (this.wireLines[v].geom.x1 == this.wireLines[v].geom.x2) {
                    this.wires[v].setAngle(0);
                }
                this.wires[v].setOrigin(0.5, 0.5);
            }
            for (var v = 0; v < wiringXPoints["x" + this.objectIDs[i]].length / 4; v++) {
                if (activeWireXY[0] == i && activeWireXY[1] == v) {
                    activeWireXY[2] = this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width);
                    activeWireXY[3] = this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height);
                }
                if (activeWire == true) {
                    this.activeWire.setTo(activeWireXY[2], activeWireXY[3], this.input.mousePointer.x, this.input.mousePointer.y);
                    this.activeWire.setDepth(4);
                    this.activeWire.strokeColor = wireColor;
                    this.activeWire.setVisible(1);

                    if (down == true) {
                        if (this.input.mousePointer.x >= (this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width)) - deviceWidth * 0.01 && this.input.mousePointer.x <= (this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width)) + deviceWidth * 0.01 && this.input.mousePointer.y <= (this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height)) + deviceHeight * 0.015 && this.input.mousePointer.y >= (this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height)) - deviceHeight * 0.015) {
                            activeWire = false;
                            this.activeWire.setVisible(0);
                            var node = this.add.circle(activeWireXY[2], activeWireXY[3], 8 * scaleCount, wireColor);
                            this.nodes.push(node);
                            var node2 = this.add.circle(this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width), this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height), 8 * scaleCount, wireColor);
                            this.nodes.push(node2);
                            wireGroup++;
                            nodeLinks.push(this.wireLines.length);
                            nodeLinks.push(activeWireXY[0]);
                            nodeLinks.push(activeWireXY[1]);
                            nodeLinks.push(wireGroup);
                            nodeLinks.push(this.wireLines.length);
                            nodeLinks.push(i);
                            nodeLinks.push(v);
                            nodeLinks.push(wireGroup);

                            var obj = this.add.line(node.x, node.y, node2.x, node2.y, 0xffffff);
                            obj.setLineWidth(3.8 * scaleCount);
                            this.wireLines.push(obj);
                            var obj2;
                            obj2 = this.add.rectangle((obj.geom.x1 + obj.geom.x2) / 2, (obj.geom.y1 + obj.geom.y2) / 2, lineWidth, Math.sqrt(Math.pow(Math.abs(obj.geom.x1 - obj.geom.x2), 2) + Math.pow(Math.abs(obj.geom.y1 - obj.geom.y2), 2)), wireColor)

                            obj2.setAngle(-Math.atan(Math.abs(obj.geom.x1 - obj.geom.x2) / Math.abs(obj.geom.y1 - obj.geom.y2)) * 180 / Math.PI);
                            obj2.enableClick();
                            this.wires.push(obj2);
                            down = false;

                            this.createPalette();
                            lastWire = this.wires.length - 1;
                        }
                    }
                }
                if (this.input.mousePointer.x >= (this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width)) - deviceWidth * 0.01 && this.input.mousePointer.x <= (this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width)) + deviceWidth * 0.01 && this.input.mousePointer.y <= (this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height)) + deviceHeight * 0.015 && this.input.mousePointer.y >= (this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height)) - deviceHeight * 0.015) {
                    wiringPointer = true;
                    this.wiringPointer.x = this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width)
                    this.wiringPointer.y = this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height);
                    this.wiringPointer.fillColor = wireColor;
                    this.wiringPointer.radius = 8 * scaleCount;
                    this.wiringPointer.setVisible(1);
                    this.wiringPointer.setDepth(4);
                    pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                    if (down == true) {
                        if (activeWire == false) {
                            activeWire = true;
                            this.clearPanel()
                            activeWireXY[0] = i;
                            activeWireXY[1] = v;
                            activeWireXY[2] = this.objects[i].x + (wiringXPoints["x" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width);
                            activeWireXY[3] = this.objects[i].y + (wiringYPoints["y" + this.objectIDs[i]][v + rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height);
                            down = false;
                        }

                    }
                }
            }

            if (this.objects[i].isClicked()) {
                if (this.slash.visible == 0) {
                    for (var v = -10000; v < 10000; v++) {
                        if (Math.abs(((v * 28 * scaleCount + (snapStartX % (28 * scaleCount))) - ((wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width) + this.objects[i].x))) < (28 * scaleCount) / 2 && Math.abs(((v * 28 * scaleCount + (snapStartX % (28 * scaleCount))) - ((wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width) + this.objects[i].x))) > 0) {
                            this.objects[i].x = (v * 28 * scaleCount + (snapStartX % (28 * scaleCount))) - (wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].width);
                        }
                    }
                    for (var v = -10000; v < 10000; v++) {

                        if (Math.abs(((v * 28 * scaleCount + (snapStartY % (28 * scaleCount))) - ((wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height) + this.objects[i].y))) < (28 * scaleCount) / 2 && Math.abs(((v * 28 * scaleCount + (snapStartY % (28 * scaleCount))) - ((wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height) + this.objects[i].y))) > 0) {
                            this.objects[i].y = (v * 28 * scaleCount + (snapStartY % (28 * scaleCount))) - (wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3]] * this.objects[i].height);
                        }
                    }
                } /*else {
                    for (var v = 0; v < this.nodes.length; v++) {
                        for (var t = 0; t < objectsData[(this.objectIDs[i] * 5) + 3]; t++) {
                            if (Math.abs(((wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + t] * this.objects[i].width) + this.objects[i].x) - this.nodes[v].x) < 10) {
                                this.objects[i].x = this.nodes[v].x - (wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + t] * this.objects[i].width);
                            }
                            if (Math.abs(((wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + t] * this.objects[i].height) + this.objects[i].y) - this.nodes[v].y) < 10) {
                                this.objects[i].y = this.nodes[v].y - (wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + t] * this.objects[i].height);
                            }
                        }
                    }
                    for (var v = 0; v < objectsData[(this.objectIDs[i] * 5) + 3]; v++) {
                        for (var t = 0; t < this.objects.length; t++) {
                            for (var z = 0; z < objectsData[(this.objectIDs[t] * 5) + 3]; z++) {
                                if (Math.abs(((wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + v] * this.objects[i].width) + this.objects[i].x) - ((wiringXPoints["x" + this.objectIDs[t]][rotateAngle[t] * objectsData[(this.objectIDs[t] * 5) + 3] + z] * this.objects[t].width) + this.objects[t].x)) < 10 && t != i) {
                                    this.objects[i].x = ((wiringXPoints["x" + this.objectIDs[t]][rotateAngle[t] * objectsData[(this.objectIDs[t] * 5) + 3] + z] * this.objects[t].width) + this.objects[t].x) - (wiringXPoints["x" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + v] * this.objects[i].width);
                                }
                                if (Math.abs(((wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + v] * this.objects[i].height) + this.objects[i].y) - ((wiringYPoints["y" + this.objectIDs[t]][rotateAngle[t] * objectsData[(this.objectIDs[t] * 5) + 3] + z] * this.objects[t].height) + this.objects[t].y)) < 10 && t != i) {
                                    this.objects[i].y = ((wiringYPoints["y" + this.objectIDs[t]][rotateAngle[t] * objectsData[(this.objectIDs[t] * 5) + 3] + z] * this.objects[t].height) + this.objects[t].y) - (wiringYPoints["y" + this.objectIDs[i]][rotateAngle[i] * objectsData[(this.objectIDs[i] * 5) + 3] + v] * this.objects[i].height);
                                }
                            }
                        }
                    }
                }*/
            }
            endingX[i] = this.objects[i].x;
            endingY[i] = this.objects[i].y;
        }

        var moved = -1;
        if (this.shiftSelect.length > 0) {
            for (var v = 0; v < this.shiftSelect.length; v++) {
                if (startingX[v] != endingX[v] || startingY[v] != endingY[v]) {
                    moved = v;
                }
            }
            for (var v = 0; v < this.shiftSelect.length; v++) {
                if (this.shiftSelect[v] != this.objects[moved] && moved != -1) {
                    this.shiftSelect[v].x += (endingX[moved] - startingX[moved]);
                    this.shiftSelect[v].y += (endingY[moved] - startingY[moved]);
                }
            }
        }

        if (wiringPointer == false) {
            this.wiringPointer.setVisible(0);
        }

        console.log(redo)

        if (this.undo.wasClicked() || this.z.wasPressed()) {
            if (undo.length >= 4) {
                redo.push(undo[undo.length - 4]);
                redo.push(undo[undo.length - 3]);
                redo.push(undo[undo.length - 2]);
                redo.push(undo[undo.length - 1]);
                if (undo[undo.length - 4] == "deletedObject") {
                    this.objects[-undo[undo.length - 3]].setVisible(1);
                    for (var v = 0; v < undo[undo.length - 2].length; v++) {
                        this.wires[undo[undo.length - 2][v]].setVisible(1);
                        this.wireLines[undo[undo.length - 2][v]].setVisible(1);
                    }
                    for (var v = 0; v < undo[undo.length - 1].length; v++) {
                        this.nodes[undo[undo.length - 1][v]].setVisible(1);
                    }
                }
                if (undo[undo.length - 4] == "movedObject") {
                    redo[redo.length - 2] = -undo[undo.length - 2];
                    redo[redo.length - 1] = -undo[undo.length - 1];
                    this.objects[-undo[undo.length - 3] - 1].x += undo[undo.length - 2];
                    this.objects[-undo[undo.length - 3] - 1].y += undo[undo.length - 1];
                    lastPosition[0] = undo[undo.length - 3]
                    lastPosition[1] = this.objects[-undo[undo.length - 3] - 1].x;
                    lastPosition[2] = this.objects[-undo[undo.length - 3] - 1].y;
                }
                if (undo[undo.length - 4] == "subdividedWire") {
                    this.nodes[undo[undo.length - 3]].setVisible(0);
                    this.nodes[undo[undo.length - 3] + 1].setVisible(0);
                    this.wires[nodeLinks[undo[undo.length - 2] + 1]].setVisible(1);
                    this.wires[nodeLinks[undo[undo.length - 2] + 2]].setVisible(0);
                    this.wires[nodeLinks[undo[undo.length - 1] + 2]].setVisible(0);
                    this.wireLines[nodeLinks[undo[undo.length - 2] + 1]].setVisible(1);
                    this.wireLines[nodeLinks[undo[undo.length - 2] + 2]].setVisible(0);
                    this.wireLines[nodeLinks[undo[undo.length - 1] + 2]].setVisible(0);
                }
                if (undo[undo.length - 4] == "movedNode") {
                    redo[redo.length - 2] = -undo[undo.length - 2];
                    redo[redo.length - 1] = -undo[undo.length - 1];
                    this.nodes[undo[undo.length - 3]].x += undo[undo.length - 2];
                    this.nodes[undo[undo.length - 3]].y += undo[undo.length - 1];
                    this.nodes[undo[undo.length - 3]].radius = 8 * scaleCount;
                    lastPosition[0] = undo[undo.length - 3];
                    lastPosition[1] = this.nodes[undo[undo.length - 3]].x;
                    lastPosition[2] = this.nodes[undo[undo.length - 3]].y;
                }
                undo.splice(undo.length - 4, 4);
            }
        }

        if (this.redo.wasClicked() || this.x.wasPressed()) {
            if (redo.length >= 4) {
                undo.push(redo[redo.length - 4]);
                undo.push(redo[redo.length - 3]);
                undo.push(redo[redo.length - 2]);
                undo.push(redo[redo.length - 1]);
                if (redo[redo.length - 4] == "deletedObject") {
                    this.objects[-redo[redo.length - 3]].setVisible(0);
                    for (var v = 0; v < redo[redo.length - 2].length; v++) {
                        this.wires[redo[redo.length - 2][v]].setVisible(0);
                        this.wireLines[redo[redo.length - 2][v]].setVisible(0);
                    }
                    for (var v = 0; v < redo[redo.length - 1].length; v++) {
                        this.nodes[redo[redo.length - 1][v]].setVisible(0);
                    }
                }
                if (redo[redo.length - 4] == "movedObject") {
                    undo[undo.length - 2] = -redo[redo.length - 2];
                    undo[undo.length - 1] = -redo[redo.length - 1];
                    this.objects[-redo[redo.length - 3] - 1].x += redo[redo.length - 2];
                    this.objects[-redo[redo.length - 3] - 1].y += redo[redo.length - 1];
                    lastPosition[0] = redo[redo.length - 3];
                    lastPosition[1] = this.objects[-redo[redo.length - 3] - 1].x;
                    lastPosition[2] = this.objects[-redo[redo.length - 3] - 1].y;
                }
                if (redo[redo.length - 4] == "subdividedWire") {
                    this.nodes[redo[redo.length - 3]].setVisible(1);
                    this.nodes[redo[redo.length - 3] + 1].setVisible(1);
                    this.wires[nodeLinks[redo[redo.length - 2] + 1]].setVisible(0);
                    this.wires[nodeLinks[redo[redo.length - 2] + 2]].setVisible(1);
                    this.wires[nodeLinks[redo[redo.length - 1] + 2]].setVisible(1);
                    this.wireLines[nodeLinks[redo[redo.length - 2] + 1]].setVisible(0);
                    this.wireLines[nodeLinks[redo[redo.length - 2] + 2]].setVisible(1);
                    this.wireLines[nodeLinks[redo[redo.length - 1] + 2]].setVisible(1);
                }
                if (redo[redo.length - 4] == "movedNode") {
                    undo[undo.length - 2] = -redo[redo.length - 2];
                    undo[undo.length - 1] = -redo[redo.length - 1];
                    this.nodes[redo[redo.length - 3]].x += redo[redo.length - 2];
                    this.nodes[redo[redo.length - 3]].y += redo[redo.length - 1];
                    this.nodes[redo[redo.length - 3]].radius = 8 * scaleCount;
                    lastPosition[0] = redo[redo.length - 3];
                    lastPosition[1] = this.nodes[redo[redo.length - 3]].x;
                    lastPosition[2] = this.nodes[redo[redo.length - 3]].y;
                }
                redo.splice(redo.length - 4, 4);
            }
        }

        if (this.popupcandel.visible == true) {

            if (this.popupcandel.wasClicked() || this.popupcandeltext.wasClicked() || this.esc.wasPressed()) {
                this.popupcandel.setVisible(0);
                this.popupdel.setVisible(0);
                this.popupcandeltext.setVisible(0);
                this.popupdeltext.setVisible(0);

                this.enabling();
                del = -1;
            }

            if (this.popupdel.wasClicked() || (del >= 0 && this.return.wasPressed())) {
                this.popupcandel.setVisible(0);
                this.popupdel.setVisible(0);
                this.popupcandeltext.setVisible(0);
                this.popupdeltext.setVisible(0);

                this.objects[del].setVisible(0);
                this.objectLabels[del].setVisible(0);

                var allGroups = [];
                var wiresPerGroup = [];
                var selectWireGroup;

                for (var v = 0; v < this.nodes.length; v++) {
                    if (nodeLinks[v * 4] >= 0 && nodeLinks[(v * 4) + 1] == del) {
                        selectWireGroup = nodeLinks[(v * 4) + 3];
                        allGroups.push(selectWireGroup);
                    }
                }

                for (var v = 0; v < allGroups.length; v++) {
                    wiresPerGroup.push(0);
                }

                for (var v = 0; v < allGroups.length; v++) {
                    for (var t = 0; t < this.nodes.length; t++) {
                        if (nodeLinks[(t * 4) + 3] == allGroups[v]) {
                            wiresPerGroup[v]++;
                        }
                    }
                }

                var wires = [];
                var nodes = [];
                for (var t = 0; t < allGroups.length; t++) {
                    for (var v = 0; v < this.nodes.length; v++) {
                        if (nodeLinks[(v * 4) + 3] == allGroups[t]) {
                            if (nodeLinks[v * 4] >= 0) {
                                if (this.wires[nodeLinks[v * 4]].visible == 1) {
                                    this.wires[nodeLinks[v * 4]].setVisible(0);
                                    this.wireLines[nodeLinks[v * 4]].setVisible(0);
                                    wires.push(nodeLinks[v * 4]);
                                }
                            } else {
                                if (this.wires[nodeLinks[(v * 4) + 2]].visible == 1) {
                                    this.wires[nodeLinks[(v * 4) + 2]].setVisible(0)
                                    this.wireLines[nodeLinks[(v * 4) + 2]].setVisible(0);
                                    wires.push(nodeLinks[(v * 4) + 2]);
                                }
                            }
                        }
                    }

                    for (var v = 0; v < this.nodes.length; v++) {
                        if (nodeLinks[(v * 4) + 3] == allGroups[t]) {
                            if (this.nodes[v].visible == 1) {
                                this.nodes[v].setVisible(0);
                                nodes.push(v);
                            }
                        }
                    }
                }

                undo.push("deletedObject");
                undo.push(-del);
                undo.push(wires);
                undo.push(nodes);
                redo.splice(0, redo.length);

                this.enabling();
                del = -1;
            }
        }

        for (var i = 0; i < this.items.length; i++) {

            if (this.items[i].isOver()) {
                pElement.style.cursor = "url('https://i.ibb.co/RD5jn4v/icons8-hand-cursor-24-1-1.png'), auto";
                this.items[i].setTint(0xffbfbf)
            } else {
                this.items[i].setTint(0xffffff)
            }

            if (this.items[i].wasClicked()) {
                this.clearPanel();
                var obj = this.add.sprite(deviceWidth / 2 + deviceWidth * 0.002, deviceHeight / 2, `${itemObjectID[i]}`);
                for (var v = 0; v < this.objects.length; v++) {
                    if (this.objectIDs[v] == itemObjectID[i] && this.objects[v].x == obj.x && this.objects[v].y == obj.y) {
                        obj.x += deviceWidth * 0.01;
                        obj.y += deviceHeight * 0.02;
                    }
                }

                obj.scale *= (objectsData[(itemObjectID[i] * 5) + 2]);
                obj.width *= (objectsData[(itemObjectID[i] * 5) + 2]);
                obj.height *= (objectsData[(itemObjectID[i] * 5) + 2]);
                obj.scale *= scaleCount;
                obj.width *= scaleCount;
                obj.height *= scaleCount;
                obj.enableDrag();
                obj.enableClick();
                obj.setDepth(3);
                for (var v = 0; v < this.objects.length; v++) {
                    this.objects[v].depth -= 0.01;
                }
                this.objects.push(obj);
                this.objectIDs.push(itemObjectID[i]);
                var label = this.add.text(this.objects[this.objects.length - 1].x + scaleCount * deviceWidth * defaultLabel[(itemObjectID[i] * 12) + 4], this.objects[this.objects.length - 1].y + scaleCount * deviceHeight * defaultLabel[(itemObjectID[i] * 12) + 5], defaultLabel[(itemObjectID[i] * 12)], 0x000000);
                label.setOrigin(0.5, 0.5);
                label.setFontSize(scaleCount * deviceHeight * defaultLabel[(itemObjectID[i] * 12) + 1]);
                this.objectLabels.push(label);
                rotateAngle.push(0);
                shiftObjects.push(false);
                settings.push(-1);
                settings.push(-1);

                this.openPanel(this.objects.length - 1);
                lastClicked = this.objects.length - 1;
            }
        }

        if (this.grid.wasClicked() && (this.input.mousePointer.x < 1095 || this.input.mousePointer.y > 325)) {
            this.clearPanel();
            if (element != null) {
                element.blur();
            }
        }

        if (this.slash.visible == 0) {
            this.grid.visible = 1;
        } else {
            this.grid.visible = 0;
        }

        if (this.binHandleArrow.wasClicked() || this.binHandle.wasClicked()) {
            if (itemBinOpen == true) {
                if (closing == false) {
                    closing = true;
                    this.binHandleArrow.setAngle(0);
                }
            } else {
                if (opening == false) {
                    opening = true;
                    this.binHandleArrow.setAngle(180);
                }
            }
        }

        if (this.binHandleArrow.x <= deviceWidth * 0.015) {
            closing = false;
            itemBinOpen = false;
        }

        if (this.binHandleArrow.x >= deviceWidth * 0.21) {
            opening = false;
            itemBinOpen = true;
            this.binLabel.setAlpha(1);
            this.binLabelDivider.setAlpha(1);
            this.itemTypeButton.setVisible(1);
            this.itemTypeArrow.setVisible(1);
            if (currentItemType == 0) {
                this.addItem.setVisible(1);
            }
            for (var t = 0; t < this.itemLabels.length; t++) {
                this.itemLabels[t].setVisible(1);
                this.items[t].setVisible(1);
            }
            this.lastPageButton.setVisible(1);
            this.lastPageArrow.setVisible(1);
            this.nextPageButton.setVisible(1);
            this.nextPageArrow.setVisible(1);
        }

        if (closing == true) {
            this.itemBin.x -= 10;
            this.binHandle.x -= 10;
            this.binHandleArrow.x -= 10;
            this.binLabel.setAlpha(0);
            this.binLabelDivider.setAlpha(0);
            this.itemTypeButton.setVisible(0);
            this.itemTypeArrow.setVisible(0);
            this.addItem.setVisible(0);
            for (var t = 0; t < this.itemLabels.length; t++) {
                this.itemLabels[t].setVisible(0);
                this.items[t].setVisible(0);
            }
            this.lastPageButton.setVisible(0);
            this.lastPageArrow.setVisible(0);
            this.nextPageButton.setVisible(0);
            this.nextPageArrow.setVisible(0);
        }

        if (opening == true) {
            this.itemBin.x += 10;
            this.binHandle.x += 10;
            this.binHandleArrow.x += 10;
        }

        if (element == null && ((this.s.wasPressed() && this.shift.isPressed()) || this.save.wasClicked() || this.saveButton.wasClicked())) {
            this.save.setVisible(0);
            this.saved.setVisible(1);

            this.disabling();

            this.popupover.setVisible(1);
            this.popup.setVisible(1);
            this.popuptext.setText("Click the above links to download your data.");
            this.popuptext.setVisible(1);
            this.popupdone.setVisible(1);
            this.popupcreate.setVisible(1);
            this.popupdonetext.setVisible(1);
            this.popupcreatetext.setVisible(1);

            var textFileUrl = null;

            function generateTextFileUrl(txt) {
                let fileData = new Blob([txt], {
                    type: 'text/plain'
                });

                if (textFileUrl !== null) {
                    window.URL.revokeObjectURL(textFile);
                }
                textFileUrl = window.URL.createObjectURL(fileData);

                return textFileUrl;
            };

            this.clearHTML();
            document.getElementById('downloads').innerHTML = "Downloads: ";

            for (var v = 0; v < this.customColors.length; v++) {
                nodeLinks.push(this.customColors[v].fillColor);
            }
            document.getElementById('download0').innerHTML = "Node Data";
            document.getElementById('download0').download = "NodeData.txt";
            document.getElementById('download0').href = generateTextFileUrl(nodeLinks);

            textFileUrl = null;

            var nodesData = [];
            for (var v = 0; v < this.nodes.length; v++) {
                nodesData.push(this.nodes[v].visible);
                nodesData.push(this.nodes[v].x);
                nodesData.push(this.nodes[v].y);
                nodesData.push(this.nodes[v].fillColor);
            }

            document.getElementById('download1').innerHTML = "Nodes";
            document.getElementById('download1').download = "Nodes.txt";
            document.getElementById('download1').href = generateTextFileUrl(nodesData);

            textFileUrl = null;

            var objectData = [];
            for (var v = 0; v < this.objects.length; v++) {
                objectData.push(this.objects[v].visible);
                objectData.push(this.objects[v].x);
                objectData.push(this.objects[v].y);
                objectData.push(this.objectIDs[v]);
                objectData.push(rotateAngle[v]);
                objectData.push(settings[v * 2]);
                objectData.push(settings[(v * 2) + 1]);
                objectData.push(this.objectLabels[v].text);
            }

            document.getElementById('download2').innerHTML = "ObjectData";
            document.getElementById('download2').download = "ObjectData.txt";
            document.getElementById('download2').href = generateTextFileUrl(objectData);
        }
        if (this.increaseScale.isClicked() || this.increaseScaleButton.isClicked() || (element == null && this.space.isPressed() && !(this.shift.isPressed()))) {
            scaleCount *= 1.005;
            snapStartX = ((snapStartX - (deviceWidth / 2)) * 1.005) + (deviceWidth / 2);
            snapStartY = ((snapStartY - (deviceHeight / 2)) * 1.005) + (deviceHeight / 2);
            for (var t = 0; t < this.objects.length; t++) {
                this.objects[t].scale *= 1.005;
                this.objects[t].width *= 1.005;
                this.objects[t].height *= 1.005;
                this.objects[t].x = ((this.objects[t].x - (deviceWidth / 2)) * 1.005) + (deviceWidth / 2);
                this.objects[t].y = ((this.objects[t].y - (deviceHeight / 2)) * 1.005) + (deviceHeight / 2);
                this.objects[t].setDepth(2);
            }
            this.title.setDepth(1);
            this.instructions.setDepth(1);
            this.grid.destroy();
            this.grid = this.add.gridLayout(snapStartX, snapStartY, 100000, 100000, 28 * scaleCount, 28 * scaleCount);
            this.grid.setOutlineStyle(0xdddddd, 0.5)
            this.grid.setDepth(0);
            this.grid.enableClick();
            grid = this.grid;
            lineWidth *= 1.005;
            for (var v = 0; v < this.wires.length; v++) {
                this.wires[v].width *= 1.005;
            }
            for (var v = 0; v < this.nodes.length; v++) {
                this.nodes[v].setRadius(this.nodes[v].radius *= 1.005);
                this.nodes[v].x = ((this.nodes[v].x - (deviceWidth / 2)) * 1.005) + (deviceWidth / 2);
                this.nodes[v].y = ((this.nodes[v].y - (deviceHeight / 2)) * 1.005) + (deviceHeight / 2);
            }
            for (var v = 0; v < this.wireLines.length; v++) {
                this.wireLines[v].setLineWidth(this.wireLines[v].lineWidth * 1.005);
            }
            this.activeWire.setLineWidth(this.activeWire.lineWidth * 1.005);

            if (lastPosition[1] != deviceWidth * 0.05 && lastPosition[2] != deviceHeight * 0.22) {
                lastPosition[1] = ((lastPosition[1] - (deviceWidth / 2)) * 1.005) + (deviceWidth / 2);
                lastPosition[2] = ((lastPosition[2] - (deviceHeight / 2)) * 1.005) + (deviceHeight / 2);
            }

            for (var v = 0; v < undo.length / 4; v++) {
                undo[(v * 4) + 2] *= 1.005;
                undo[(v * 4) + 3] *= 1.005;
            }

            for (var v = 0; v < redo.length / 4; v++) {
                redo[(v * 4) + 2] *= 1.005;
                redo[(v * 4) + 3] *= 1.005;
            }
        }

        if (this.decreaseScale.isClicked() || this.decreaseScaleButton.isClicked() || (element == null && this.space.isPressed() && this.shift.isPressed())) {
            scaleCount *= 0.995;
            snapStartX = ((snapStartX - (deviceWidth / 2)) * 0.995) + (deviceWidth / 2);
            snapStartY = ((snapStartY - (deviceHeight / 2)) * 0.995) + (deviceHeight / 2);
            for (var t = 0; t < this.objects.length; t++) {
                this.objects[t].scale *= 0.995;
                this.objects[t].width *= 0.995;
                this.objects[t].height *= 0.995;
                this.objects[t].x = ((this.objects[t].x - (deviceWidth / 2)) * 0.995) + (deviceWidth / 2);
                this.objects[t].y = ((this.objects[t].y - (deviceHeight / 2)) * 0.995) + (deviceHeight / 2);
                this.objects[t].setDepth(2);
            }
            this.title.setDepth(1);
            this.instructions.setDepth(1);

            this.grid.destroy();
            this.grid = this.add.gridLayout(snapStartX, snapStartY, 100000, 100000, 28 * scaleCount, 28 * scaleCount);
            this.grid.setOutlineStyle(0xdddddd, 0.5)
            this.grid.setDepth(0);
            this.grid.enableClick();
            grid = this.grid;
            lineWidth *= 0.995;
            for (var v = 0; v < this.wires.length; v++) {
                this.wires[v].width *= 0.995;
            }
            for (var v = 0; v < this.nodes.length; v++) {
                this.nodes[v].setRadius(this.nodes[v].radius *= 0.995);
                this.nodes[v].x = ((this.nodes[v].x - (deviceWidth / 2)) * 0.995) + (deviceWidth / 2);
                this.nodes[v].y = ((this.nodes[v].y - (deviceHeight / 2)) * 0.995) + (deviceHeight / 2);
            }
            for (var v = 0; v < this.wireLines.length; v++) {
                this.wireLines[v].setLineWidth(this.wireLines[v].lineWidth * 0.995);
            }
            this.activeWire.setLineWidth(this.activeWire.lineWidth * 0.995);

            if (lastPosition[1] != deviceWidth * 0.05 && lastPosition[2] != deviceHeight * 0.22) {
                lastPosition[1] = ((lastPosition[1] - (deviceWidth / 2)) * 0.995) + (deviceWidth / 2);
                lastPosition[2] = ((lastPosition[2] - (deviceHeight / 2)) * 0.995) + (deviceHeight / 2);
            }

            for (var v = 0; v < undo.length / 4; v++) {
                undo[(v * 4) + 2] *= 0.995;
                undo[(v * 4) + 3] *= 0.995;
            }

            for (var v = 0; v < redo.length / 4; v++) {
                redo[(v * 4) + 2] *= 0.995;
                redo[(v * 4) + 3] *= 0.995;
            }
        }

        if (this.home.wasClicked()) {
            this.clearHTML();
            this.popupover.setVisible(1);
            this.popup.setVisible(1);
            this.popuptext.setText("Are you sure you want to leave? You will lose your work.");
            this.popuptext.setVisible(1);
            this.popupcancel.setVisible(1);
            this.popupyes.setVisible(1);
            this.popupcanceltext.setVisible(1);
            this.popupyestext.setVisible(1);

            this.disabling();
        }

        if (this.info.wasClicked() || this.addItem.wasClicked()) {
            //window.open('https://youtube.com', '_blank');
            window.open('/Tutorial.html', '_blank');
        }

        if (this.popupcancel.visible == 1) {
            if (this.popupcancel.wasClicked() || this.popupcanceltext.wasClicked() || this.esc.wasPressed()) {
                this.popupcancel.setVisible(0);
                this.popupyes.setVisible(0);
                this.popupcanceltext.setVisible(0);
                this.popupyestext.setVisible(0);

                this.enabling();
            }
        }

        if (this.popupdone.visible == 1) {
            if (this.popupdone.wasClicked() || this.popupdonetext.wasClicked() || this.esc.wasPressed()) {
                this.popupdone.setVisible(0);
                this.popupcreate.setVisible(0);
                this.popupdonetext.setVisible(0);
                this.popupcreatetext.setVisible(0);

                this.save.setVisible(1);
                this.saved.setVisible(0);

                this.clearHTML();

                this.enabling();
            }
        }

        if (this.popupyes.visible == 1) {
            if (this.popupyes.wasClicked() || this.popupyestext.wasClicked() || this.return.wasPressed()) {
                this.scene.start("Menu");
            }
        }

    }

    clearPanel() {
        this.clearHTML();
        if (panelType == 1) {
            for (var v = 0; v < 10; v++) {
                if (this.palette.length > 0) {
                    this.palette[v].destroy();
                }
            }
            for (var v = 0; v < this.customColors.length; v++) {
                this.customColors[v].destroy();
            }
            this.customColorBox.destroy();
            this.customColorAdd.destroy();
        }
        if (panelType == 4) {
            this.panelResistanceValueBox.destroy();
            this.panelResistanceValue.destroy();
            this.panelResistanceUnitBox.destroy();
            this.panelResistanceUnit.destroy();
        }
        if (panelType == 5 || panelType == 8) {
            for (var v = 0; v < 5; v++) {
                if (this.objectColors.length > 0) {
                    this.objectColors[v].destroy();
                    this.objectColors[v].destroy();
                }
            }
            for (var v = 0; v < this.customObjectColors.length; v++) {
                this.customObjectColors[v].destroy();
            }
            this.customObjectColorBox.destroy();
            this.customObjectColorAdd.destroy();
        }
        if (panelType == 7 || panelType == 8 || panelType == 10) {
            this.panelObjectLabelBox.destroy();
            this.panelObjectLabel.destroy();
        }
        clean(this.palette);
        clean(this.customColors);
        clean(this.objectColors);
        clean(this.customObjectColors);

        for (var v = 0; v < this.selected.length; v++) {
            this.selected[v] = -1;
        }

        panelType = 0;
        this.info.enableClick();
        this.panel.setVisible(0);
        this.paneltext.setVisible(0);
        this.panelDivider.setVisible(0);
        this.panelSelectLabel.setVisible(0);
        this.panelSelectLabel2.setVisible(0);
        this.closex.setVisible(0);
        this.panelDeleteButton.setVisible(0);
        this.panelDelete.setVisible(0);
        this.panelDuplicateButton.setVisible(0);
        this.panelDuplicate.setVisible(0);
        this.panelEditButton.setVisible(0);
        this.panelEditIcon.setVisible(0);
        this.panelEditText.setVisible(0);

        this.panelUpArrow.setVisible(0);
        this.panelLeftArrow.setVisible(0);
        this.panelRightArrow.setVisible(0);
        this.panelDownArrow.setVisible(0);
        this.panelRotateLeft.setVisible(0);
        this.panelRotateRight.setVisible(0);

        this.panelBackward.setVisible(0);
        this.panelForward.setVisible(0);

        this.panelWireDeleteButton.setVisible(0);
        this.panelWireDeleteIcon.setVisible(0);
        this.panelWireDeleteText.setVisible(0);

        this.panelWireAddNodeButton.setVisible(0);
        this.panelWireAddNodeIcon.setVisible(0);
        this.panelWireAddNodeText.setVisible(0);
    }

    openPanel(i) {
        panelType = this.objectIDs[i] + 2;

        this.info.disableClick();
        this.panel.setVisible(1);
        this.closex.setVisible(1);
        this.panelDuplicateButton.setVisible(1);
        this.panelDuplicate.setVisible(1);
        this.panelDeleteButton.setVisible(1);
        this.panelDelete.setVisible(1);
        this.panelEditButton.setVisible(1);
        this.panelEditIcon.setVisible(1);
        this.panelEditText.setVisible(1);

        this.panelUpArrow.setVisible(1);
        this.panelLeftArrow.setVisible(1);
        this.panelRightArrow.setVisible(1);
        this.panelDownArrow.setVisible(1);
        this.panelRotateLeft.setVisible(1);
        this.panelRotateRight.setVisible(1);

        this.panelBackward.setVisible(1);
        this.panelForward.setVisible(1);

        this.paneltext.setText(objectsData[this.objectIDs[i] * 5]);
        this.paneltext.setOrigin(0, 0.5)
        this.paneltext.setVisible(1);
        this.panelDivider.setVisible(1);

        if (panelType == 2 || panelType == 3 || panelType == 6 || panelType == 9 || panelType == 11) {
            this.panel.y = deviceHeight * 0.05;
        }
        if (panelType == 4) {
            this.panel.y = deviceHeight * 0.14;
            this.panelSelectLabel.setY(deviceHeight * 0.4);
            this.panelSelectLabel.setText("Resistance");
            this.panelSelectLabel.setVisible(1);
            this.panelResistanceValueBox = this.add.rectangle(deviceWidth * 0.905, deviceHeight * 0.45, deviceWidth * 0.095, deviceHeight * 0.05, 0xEDDD2D);
            this.panelResistanceValueBox.enableClick();
            if (settings[(i * 2)] == -1) {
                this.panelResistanceValue = this.add.text(deviceWidth * 0.905, deviceHeight * 0.45, "10", 0x000000);
            } else {
                this.panelResistanceValue = this.add.text(deviceWidth * 0.905, deviceHeight * 0.45, settings[(i * 2)], 0x000000);
            }
            this.panelResistanceValue.setFontSize(deviceHeight * 0.04);
            this.panelResistanceValue.setOrigin(0.5, 0.5);
            this.panelResistanceValue.enableClick();
            this.panelResistanceUnitBox = this.add.rectangle(deviceWidth * 0.975, deviceHeight * 0.45, deviceWidth * 0.035, deviceHeight * 0.05, 0x46B5C4);
            this.panelResistanceUnitBox.enableClick();
            if (settings[(i * 2) + 1] == -1) {
                this.panelResistanceUnit = this.add.text(deviceWidth * 0.975, deviceHeight * 0.45, "K", 0x000000);
            } else {
                this.panelResistanceUnit = this.add.text(deviceWidth * 0.975, deviceHeight * 0.45, settings[(i * 2) + 1], 0x000000);
            }
            this.panelResistanceUnit.setFontSize(deviceHeight * 0.035);
            this.panelResistanceUnit.setOrigin(0.5, 0.5);
            this.panelResistanceUnit.enableClick();
        }
        if (panelType == 5) {
            this.panel.y = deviceHeight * 0.2;
        }
        if (panelType == 5 || panelType == 8) {
            this.panelSelectLabel.setY(deviceHeight * 0.4);
            this.panelSelectLabel.setText("Color");
            this.panelSelectLabel.setVisible(1);
            if (this.objectColors.length == 0) {
                for (var v = 0; v < 5; v++) {
                    var obj = this.add.rectangle(deviceWidth * 0.872 + v * deviceWidth * 0.027, deviceHeight * 0.45, deviceWidth * 0.021, deviceWidth * 0.021, objectColors[v]);
                    obj.enableClick();
                    this.objectColors.push(obj);
                }
            }
            var obj2;
            if (this.customObjectColors.length == 0) {
                for (var v = 0; v < customObjectColors.length; v++) {
                    if (v < 4) {
                        obj2 = this.add.rectangle(deviceWidth * 0.872 + v * deviceWidth * 0.027, deviceHeight * 0.51, deviceWidth * 0.021, deviceWidth * 0.021, customObjectColors[v]);
                        obj2.enableClick();
                        this.customObjectColors.push(obj2);
                    }
                }
            }
            this.customObjectColorBox = this.add.rectangle(deviceWidth * 0.872 + customObjectColors.length * deviceWidth * 0.027, deviceHeight * 0.51, deviceWidth * 0.021, deviceWidth * 0.021, 0xbbbbbb);
            this.customObjectColorBox.enableClick();
            this.customObjectColorAdd = this.add.text(this.customObjectColorBox.x, this.customObjectColorBox.y, "+", 0x000000);
            this.customObjectColorAdd.setOrigin(0.5, 0.5);
            this.customObjectColorAdd.setScale(deviceWidth * 0.000125);
            this.customObjectColorAdd.setFontSize(deviceHeight * 0.25);
            this.customObjectColorAdd.enableClick();
        }
        if (panelType == 7 || panelType == 10) {
            this.panel.y = deviceHeight * 0.15;
            this.panelSelectLabel2.setText("Label");
            this.panelSelectLabel2.y = deviceHeight * 0.4;
            this.panelSelectLabel2.setVisible(1);

            this.panelObjectLabelBox = this.add.rectangle(deviceWidth * 0.925, deviceHeight * 0.45, deviceWidth * 0.13, deviceHeight * 0.05, 0xEDDD2D);
            this.panelObjectLabelBox.enableClick();
            this.panelObjectLabel = this.add.text(deviceWidth * 0.925, deviceHeight * 0.45, defaultLabel[(panelType - 2) * 12], 0x000000);
            if (this.objectLabels[i].text != "") {
                this.panelObjectLabel.setText(this.objectLabels[i].text);
            }
            this.panelObjectLabel.setFontSize(deviceHeight * 0.04);
            this.panelObjectLabel.setOrigin(0.5, 0.5);
            this.panelObjectLabel.enableClick();
        }
        if (panelType == 8) {
            this.panel.y = deviceHeight * 0.3;
            this.panelSelectLabel2.setText("Label");
            this.panelSelectLabel2.y = deviceHeight * 0.565;
            this.panelSelectLabel2.setVisible(1);

            this.panelObjectLabelBox = this.add.rectangle(deviceWidth * 0.925, deviceHeight * 0.61, deviceWidth * 0.13, deviceHeight * 0.05, 0xEDDD2D);
            this.panelObjectLabelBox.enableClick();
            this.panelObjectLabel = this.add.text(deviceWidth * 0.925, deviceHeight * 0.61, defaultLabel[(panelType - 2) * 12], 0x000000);
            if (this.objectLabels[i].text != "") {
                this.panelObjectLabel.setText(this.objectLabels[i].text);
            }
            this.panelObjectLabel.setFontSize(deviceHeight * 0.04);
            this.panelObjectLabel.setOrigin(0.5, 0.5);
            this.panelObjectLabel.enableClick();
        }
    }

    createPalette() {
        this.clearPanel();
        this.panel.y = deviceHeight * 0.22;

        panelType = 1;
        for (var v = 0; v < this.selected.length; v++) {
            this.selected[v] = -1;
        }
        var selectWireGroup;
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[v * 4] == (this.wires.length - 1) || ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] == -3 || nodeLinks[v * 4] <= -4) && nodeLinks[(v * 4) + 2] == this.wires.length - 1)) {
                selectWireGroup = nodeLinks[(v * 4) + 3];
            }
        }
        var selectSlot = 0;
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[(v * 4) + 3] == selectWireGroup && nodeLinks[v * 4] != -3) {
                this.selected[selectSlot] = this.nodes[v];
                selectSlot++;
            }
        }
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[(v * 4) + 3] == selectWireGroup) {
                if (nodeLinks[v * 4] == -3 || nodeLinks[v * 4] == -2 || nodeLinks[v * 4] <= -4) {
                    this.selected[selectSlot] = this.wires[nodeLinks[(v * 4) + 2]];
                } else {
                    this.selected[selectSlot] = this.wires[nodeLinks[v * 4]];
                }
                selectSlot++;
            }
        }
        for (var v = 0; v < this.selected.length; v++) {
            if (this.selected[v] == -1) {
                this.selected.splice(v, (this.selected.length - v));
            }
        }
        clean(this.selected);

        this.panel.setVisible(1);
        this.paneltext.setText("Wire");
        this.paneltext.setVisible(1);
        this.panelDivider.setVisible(1);
        this.panelSelectLabel.setY(deviceHeight * 0.25);
        this.panelSelectLabel.setText("Color");
        this.panelSelectLabel.setVisible(1);
        this.closex.setVisible(1);
        if (this.palette.length == 0) {
            for (var v = 0; v < 10; v++) {
                var obj;
                if (v < 5) {
                    obj = this.add.rectangle(deviceWidth * 0.872 + v * deviceWidth * 0.027, deviceHeight * 0.3, deviceWidth * 0.021, deviceWidth * 0.021, paletteColors[v]);
                } else {
                    obj = this.add.rectangle(deviceWidth * 0.872 + (v - 5) * deviceWidth * 0.027, deviceHeight * 0.36, deviceWidth * 0.021, deviceWidth * 0.021, paletteColors[v]);
                }
                obj.enableClick();
                this.palette.push(obj);
            }
        }

        this.panelWireDeleteButton.setVisible(1);
        this.panelWireDeleteIcon.setVisible(1);
        this.panelWireDeleteText.setVisible(1);

        this.panelWireAddNodeButton.setVisible(1);
        this.panelWireAddNodeIcon.setVisible(1);
        this.panelWireAddNodeText.setVisible(1);

        this.panelSelectLabel2.setText("Custom Colors");
        this.panelSelectLabel2.y = deviceHeight * 0.42;
        this.panelSelectLabel2.setVisible(1);
        var obj2;
        for (var v = 0; v < customColors.length; v++) {
            if (v < 5) {
                obj2 = this.add.rectangle(deviceWidth * 0.872 + v * deviceWidth * 0.027, deviceHeight * 0.47, deviceWidth * 0.021, deviceWidth * 0.021, customColors[v]);
            } else {
                if (v < 10) {
                    obj2 = this.add.rectangle(deviceWidth * 0.872 + (v - 5) * deviceWidth * 0.027, deviceHeight * 0.53, deviceWidth * 0.021, deviceWidth * 0.021, customColors[v]);
                }
            }
            obj2.enableClick();
            this.customColors.push(obj2);
        }

        if (this.customColors.length < 5) {
            this.customColorBox = this.add.rectangle(deviceWidth * 0.872 + this.customColors.length * deviceWidth * 0.027, deviceHeight * 0.47, deviceWidth * 0.021, deviceWidth * 0.021, 0xbbbbbb);
        } else {
            this.customColorBox = this.add.rectangle(deviceWidth * 0.872 + (this.customColors.length - 5) * deviceWidth * 0.027, deviceHeight * 0.53, deviceWidth * 0.021, deviceWidth * 0.021, 0xbbbbbb);
        }
        this.customColorBox.enableClick();
        this.customColorAdd = this.add.text(this.customColorBox.x, this.customColorBox.y, "+", 0x000000);
        this.customColorAdd.setOrigin(0.5, 0.5);
        this.customColorAdd.setScale(deviceWidth * 0.000125);
        this.customColorAdd.setFontSize(deviceHeight * 0.25);
        this.customColorAdd.enableClick();
    }

    inputBox() {
        if (element == document.getElementById('input') || element == document.getElementById('inputnum') || element == document.getElementById('dropdown')) {
            if (this.del.wasPressed()) {
                element.value = element.value.slice(0, -1);
            }
            if (!(this.shift.isPressed())) {
                if (this.key0.wasPressed()) {
                    element.value += "0";
                }
                if (this.key1.wasPressed()) {
                    element.value += "1";
                }
                if (this.key2.wasPressed()) {
                    element.value += "2";
                }
                if (this.key3.wasPressed()) {
                    element.value += "3";
                }
                if (this.key4.wasPressed()) {
                    element.value += "4";
                }
                if (this.key5.wasPressed()) {
                    element.value += "5";
                }
                if (this.key6.wasPressed()) {
                    element.value += "6";
                }
                if (this.key7.wasPressed()) {
                    element.value += "7";
                }
                if (this.key8.wasPressed()) {
                    element.value += "8";
                }
                if (this.key9.wasPressed()) {
                    element.value += "9";
                }
                if (this.s.wasPressed()) {
                    element.value += "s";
                }
                if (this.w.wasPressed()) {
                    element.value += "w";
                }
                if (this.d.wasPressed()) {
                    element.value += "d";
                }
                if (this.z.wasPressed()) {
                    element.value += "z";
                }
                if (this.x.wasPressed()) {
                    element.value += "x";
                }
            }
            if (this.space.wasPressed()) {
                element.value += " ";
            }
            if (this.esc.wasPressed()) {
                this.clearHTML();
            }
        }
    }

    initiateDelete(i) {
        this.clearHTML();
        del = i;
        this.popupover.setVisible(1);
        this.popup.setVisible(1);
        this.popuptext.setText("Are you sure you want to delete this component?")
        this.popuptext.setVisible(1);
        this.popupcandel.setVisible(1);
        this.popupdel.setVisible(1);
        this.popupcandeltext.setVisible(1);
        this.popupdeltext.setVisible(1);
        this.disabling();
    }

    enabling() {
        this.popupover.setVisible(0);
        this.popup.setVisible(0);
        this.popuptext.setVisible(0);
        this.grid.enableClick();
        this.lastPageArrow.enableClick();
        this.lastPageButton.enableClick();
        this.nextPageArrow.enableClick();
        this.nextPageButton.enableClick();
        this.itemTypeArrow.enableClick();
        this.saveButton.enableClick();
        this.save.enableClick();
        this.increaseScaleButton.enableClick();
        this.increaseScale.enableClick();
        this.decreaseScaleButton.enableClick();
        this.decreaseScale.enableClick();
        this.addItem.enableClick();
        this.magnet.enableClick();
        this.closex.enableClick();
        this.home.enableClick();
        this.info.enableClick();
        this.undo.enableClick();
        this.redo.enableClick();
        for (var v = 0; v < this.objects.length; v++) {
            this.objects[v].enableClick();
            this.objects[v].enableDrag();
        }
        for (var v = 0; v < this.items.length; v++) {
            this.items[v].enableClick();
        }
    }

    disabling() {
        activeWire = false;
        this.activeWire.setVisible(0);
        this.clearPanel();
        this.grid.disableClick();
        this.lastPageArrow.disableClick();
        this.lastPageButton.disableClick();
        this.nextPageArrow.disableClick();
        this.nextPageButton.disableClick();
        this.itemTypeArrow.disableClick();
        this.saveButton.disableClick();
        this.save.disableClick();
        this.increaseScaleButton.disableClick();
        this.increaseScale.disableClick();
        this.decreaseScaleButton.disableClick();
        this.decreaseScale.disableClick();
        this.addItem.disableClick();
        this.magnet.disableClick();
        this.closex.disableClick();
        this.home.disableClick();
        this.info.disableClick();
        this.undo.disableClick();
        this.redo.disableClick();
        for (var v = 0; v < this.objects.length; v++) {
            this.objects[v].disableClick();
            this.objects[v].disableDrag();
        }
        for (var v = 0; v < this.items.length; v++) {
            this.items[v].disableClick();
        }
    }

    clearHTML() {
        document.getElementById('flex-box').style.flexDirection = 'row';
        document.getElementById('label').innerHTML = "";
        document.getElementById('input').value = "";
        document.getElementById('input').blur();
        document.getElementById('input').style.display = 'none';
        document.getElementById('inputnum').value = "";
        document.getElementById('inputnum').blur();
        document.getElementById('inputnum').style.display = 'none';
        document.getElementById('label2').innerHTML = "";
        document.getElementById('dropdown').value = "";
        document.getElementById('dropdown').blur();
        document.getElementById('dropdown').style.display = 'none';
        document.getElementById('option1').value = "Choose";
        document.getElementById('option2').value = "Microcontroller";
        document.getElementById('option3').value = "Electrical";
        document.getElementById('option4').value = "Modules";
        document.getElementById('option5').value = "Other";
        document.getElementById('label3').innerHTML = "";
        document.getElementById('downloads').innerHTML = "";
        document.getElementById('download0').innerHTML = "";
        document.getElementById('download0').href = "#";
        document.getElementById('download1').innerHTML = "";
        document.getElementById('download1').href = "#";
        document.getElementById('download2').innerHTML = "";
        document.getElementById('download2').href = "#";
    }

    wireColorShortKeys(wire) {
        var selectWireGroup;
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[v * 4] == wire || ((nodeLinks[v * 4] == -2 || nodeLinks[v * 4] == -3 || nodeLinks[v * 4] <= -4) && nodeLinks[(v * 4) + 2] == wire)) {
                selectWireGroup = nodeLinks[(v * 4) + 3]
            }
        }
        var selectSlot = 0;
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[(v * 4) + 3] == selectWireGroup && nodeLinks[v * 4] != -3) {
                this.selected[selectSlot] = this.nodes[v];
                selectSlot++;
            }
        }
        for (var v = 0; v < this.nodes.length; v++) {
            if (nodeLinks[(v * 4) + 3] == selectWireGroup) {
                if (nodeLinks[v * 4] == -3 || nodeLinks[v * 4] == -2 || nodeLinks[v * 4] <= -4) {
                    this.selected[selectSlot] = this.wires[nodeLinks[(v * 4) + 2]];
                } else {
                    this.selected[selectSlot] = this.wires[nodeLinks[v * 4]];
                }
                selectSlot++;
            }
        }
        for (var v = 0; v < this.selected.length; v++) {
            if (this.selected[v] == -1) {
                this.selected.splice(v, (this.selected.length - v));
            }
        }
        clean(this.selected);

        if (element == null) {
            if (!(this.shift.isPressed())) {
                if (this.key0.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[9];
                        wireColor = paletteColors[9];
                    }
                }
                if (this.key1.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[0];
                        wireColor = paletteColors[0];
                    }
                }
                if (this.key2.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[1];
                        wireColor = paletteColors[1];
                    }
                }
                if (this.key3.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[2];
                        wireColor = paletteColors[2];
                    }
                }
                if (this.key4.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[3];
                        wireColor = paletteColors[3];
                    }
                }
                if (this.key5.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[4];
                        wireColor = paletteColors[4];
                    }
                }
                if (this.key6.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[5];
                        wireColor = paletteColors[5];
                    }
                }
                if (this.key7.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[6];
                        wireColor = paletteColors[6];
                    }
                }
                if (this.key8.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[7];
                        wireColor = paletteColors[7];
                    }
                }
                if (this.key9.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = paletteColors[8];
                        wireColor = paletteColors[8];
                    }
                }
            } else {
                if (this.key1.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[0];
                        wireColor = customColors[0];
                    }
                }
                if (this.key2.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[1];
                        wireColor = customColors[1];
                    }
                }
                if (this.key3.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[2];
                        wireColor = customColors[2];
                    }
                }
                if (this.key4.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[3];
                        wireColor = customColors[3];
                    }
                }
                if (this.key5.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[4];
                        wireColor = customColors[4];
                    }
                }
                if (this.key6.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[5];
                        wireColor = customColors[5];
                    }
                }
                if (this.key7.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[6];
                        wireColor = customColors[6];
                    }
                }
                if (this.key8.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[7];
                        wireColor = customColors[7];
                    }
                }
                if (this.key9.wasPressed()) {
                    for (var v = 0; v < this.selected.length; v++) {
                        this.selected[v].fillColor = customColors[8];
                        wireColor = customColors[8];
                    }
                }
            }

            var noOther = true;
            for (var v = 0; v < this.customColors.length; v++) {
                if (this.customColors[v].isOver()) {
                    noOther = false;
                }
            }
            if (noOther == true) {
                if (this.del.wasPressed()) {

                    var wires = [];
                    var nodes = [];
                    for (var v = 0; v < this.nodes.length; v++) {
                        if (nodeLinks[v * 4] >= 0 && nodeLinks[(v * 4) + 3] == selectWireGroup) {
                            if (this.wires[nodeLinks[v * 4]].visible == 1) {
                                this.wires[nodeLinks[v * 4]].setVisible(0);
                                this.wireLines[nodeLinks[v * 4]].setVisible(0);
                                wires.push(nodeLinks[v * 4]);
                            }
                        }
                        if (nodeLinks[v * 4] < -1 && nodeLinks[(v * 4) + 3] == selectWireGroup) {
                            if (this.wires[nodeLinks[(v * 4) + 1]].visible == 1 && this.wires[nodeLinks[(v * 4) + 2]].visible == 1) {
                                this.wires[nodeLinks[(v * 4) + 1]].setVisible(0);
                                this.wires[nodeLinks[(v * 4) + 2]].setVisible(0);
                                this.wireLines[nodeLinks[(v * 4) + 1]].setVisible(0);
                                this.wireLines[nodeLinks[(v * 4) + 2]].setVisible(0);
                                wires.push(nodeLinks[(v * 4) + 1]);
                                wires.push(nodeLinks[(v * 4) + 2]);
                            }
                        }
                        if (nodeLinks[(v * 4) + 3] == selectWireGroup) {
                            if (this.nodes[v].visible == 1) {
                                this.nodes[v].setVisible(0);
                                nodes.push(v);
                            }
                        }
                    }
                    undo.push("deletedWire");
                    undo.push(wire);
                    undo.push(wires);
                    undo.push(nodes);
                    redo.splice(0, redo.length);
                    this.clearPanel();
                }
            }
        }
    }
}